7dc073b3df24af6210472c3068e7db90
const {
  Pool
} = require('pg');
const mongoose = require('mongoose');
const {
  Sequelize
} = require('sequelize');
const {
  promisify
} = require('util');

// PostgreSQL configuration
const pgConfig = {
  host: process.env.DB_HOST || process.env.POSTGRES_HOST || 'localhost',
  port: process.env.DB_PORT || process.env.POSTGRES_PORT || 5432,
  database: process.env.DB_NAME || process.env.POSTGRES_DB || 'cex_db',
  user: process.env.DB_USER || process.env.POSTGRES_USER || 'cex_user',
  password: process.env.DB_PASSWORD || process.env.POSTGRES_PASSWORD || 'cex_password_2024',
  max: 20,
  // maximum number of clients in the pool
  idleTimeoutMillis: 30000,
  // how long a client is allowed to remain idle
  connectionTimeoutMillis: 2000,
  // how long to wait when connecting a client
  ssl: process.env.NODE_ENV === 'production' ? {
    rejectUnauthorized: false
  } : false
};

// Create PostgreSQL pool
const pgPool = new Pool(pgConfig);

// Create Sequelize instance
const sequelize = new Sequelize(pgConfig.database, pgConfig.user, pgConfig.password, {
  host: pgConfig.host,
  port: pgConfig.port,
  dialect: 'postgres',
  logging: console.log,
  // Enable SQL query logging to see slow queries
  pool: {
    max: 20,
    min: 0,
    acquire: 30000,
    idle: 10000
  },
  ssl: pgConfig.ssl
});

// MongoDB configuration
const mongoConfig = {
  uri: process.env.MONGODB_URI || 'mongodb://localhost:27017/cex_exchange',
  options: {
    maxPoolSize: 10,
    // Maintain up to 10 socket connections
    serverSelectionTimeoutMS: 5000,
    // Keep trying to send operations for 5 seconds
    socketTimeoutMS: 45000,
    // Close sockets after 45 seconds of inactivity
    bufferCommands: false // Disable mongoose buffering
  }
};

// PostgreSQL connection test
pgPool.on('connect', client => {
  console.log('PostgreSQL client connected');
});
pgPool.on('error', (err, client) => {
  console.error('Unexpected error on idle PostgreSQL client', err);
  process.exit(-1);
});

// MongoDB connection events will be set up after connection
// This prevents issues during test initialization

// Connect to MongoDB
const connectMongoDB = async () => {
  try {
    await mongoose.connect(mongoConfig.uri, mongoConfig.options);
    console.log('MongoDB connection established');
  } catch (error) {
    console.error('MongoDB connection failed:', error);
    process.exit(1);
  }
};

// Database query helpers
const query = async (text, params) => {
  const start = Date.now();
  try {
    const res = await pgPool.query(text, params);
    const duration = Date.now() - start;
    console.log('Executed query', {
      text,
      duration,
      rows: res.rowCount
    });
    return res;
  } catch (error) {
    console.error('Database query error:', error);
    throw error;
  }
};

// Transaction helper
const transaction = async callback => {
  const client = await pgPool.connect();
  try {
    await client.query('BEGIN');
    const result = await callback(client);
    await client.query('COMMIT');
    return result;
  } catch (error) {
    await client.query('ROLLBACK');
    throw error;
  } finally {
    client.release();
  }
};

// Database health check
const healthCheck = async () => {
  const checks = {
    postgresql: false,
    mongodb: false
  };
  try {
    // PostgreSQL health check
    const pgResult = await pgPool.query('SELECT NOW()');
    checks.postgresql = !!pgResult.rows[0];
  } catch (error) {
    console.error('PostgreSQL health check failed:', error);
  }
  try {
    // MongoDB health check
    const mongoResult = await mongoose.connection.db.admin().ping();
    checks.mongodb = mongoResult.ok === 1;
  } catch (error) {
    console.error('MongoDB health check failed:', error);
  }
  return checks;
};

// Graceful shutdown
const closeConnections = async () => {
  try {
    await pgPool.end();
    console.log('PostgreSQL pool closed');
  } catch (error) {
    console.error('Error closing PostgreSQL pool:', error);
  }
  try {
    await mongoose.connection.close();
    console.log('MongoDB connection closed');
  } catch (error) {
    console.error('Error closing MongoDB connection:', error);
  }
};

// Initialize database connections
const initializeDatabase = async () => {
  try {
    // Test PostgreSQL connection
    await pgPool.query('SELECT NOW()');
    console.log('PostgreSQL connection successful');

    // Connect to MongoDB
    await connectMongoDB();
    console.log('All database connections established successfully');
  } catch (error) {
    console.error('Database initialization failed:', error);
    process.exit(1);
  }
};

// Export database utilities
module.exports = {
  pgPool,
  mongoose,
  sequelize,
  query,
  transaction,
  healthCheck,
  closeConnections,
  initializeDatabase
};

// Initialize connections when module is loaded
initializeDatabase();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sIiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiU2VxdWVsaXplIiwicHJvbWlzaWZ5IiwicGdDb25maWciLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJQT1NUR1JFU19IT1NUIiwicG9ydCIsIkRCX1BPUlQiLCJQT1NUR1JFU19QT1JUIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwiUE9TVEdSRVNfREIiLCJ1c2VyIiwiREJfVVNFUiIsIlBPU1RHUkVTX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiUE9TVEdSRVNfUEFTU1dPUkQiLCJtYXgiLCJpZGxlVGltZW91dE1pbGxpcyIsImNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzIiwic3NsIiwiTk9ERV9FTlYiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJwZ1Bvb2wiLCJzZXF1ZWxpemUiLCJkaWFsZWN0IiwibG9nZ2luZyIsImNvbnNvbGUiLCJsb2ciLCJwb29sIiwibWluIiwiYWNxdWlyZSIsImlkbGUiLCJtb25nb0NvbmZpZyIsInVyaSIsIk1PTkdPREJfVVJJIiwib3B0aW9ucyIsIm1heFBvb2xTaXplIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwiYnVmZmVyQ29tbWFuZHMiLCJvbiIsImNsaWVudCIsImVyciIsImVycm9yIiwiZXhpdCIsImNvbm5lY3RNb25nb0RCIiwiY29ubmVjdCIsInF1ZXJ5IiwidGV4dCIsInBhcmFtcyIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsInJlcyIsImR1cmF0aW9uIiwicm93cyIsInJvd0NvdW50IiwidHJhbnNhY3Rpb24iLCJjYWxsYmFjayIsInJlc3VsdCIsInJlbGVhc2UiLCJoZWFsdGhDaGVjayIsImNoZWNrcyIsInBvc3RncmVzcWwiLCJtb25nb2RiIiwicGdSZXN1bHQiLCJtb25nb1Jlc3VsdCIsImNvbm5lY3Rpb24iLCJkYiIsImFkbWluIiwicGluZyIsIm9rIiwiY2xvc2VDb25uZWN0aW9ucyIsImVuZCIsImNsb3NlIiwiaW5pdGlhbGl6ZURhdGFiYXNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgUG9vbCB9ID0gcmVxdWlyZSgncGcnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHsgU2VxdWVsaXplIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcbmNvbnN0IHsgcHJvbWlzaWZ5IH0gPSByZXF1aXJlKCd1dGlsJyk7XG5cbi8vIFBvc3RncmVTUUwgY29uZmlndXJhdGlvblxuY29uc3QgcGdDb25maWcgPSB7XG4gIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgcHJvY2Vzcy5lbnYuUE9TVEdSRVNfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgcG9ydDogcHJvY2Vzcy5lbnYuREJfUE9SVCB8fCBwcm9jZXNzLmVudi5QT1NUR1JFU19QT1JUIHx8IDU0MzIsXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX0RCIHx8ICdjZXhfZGInLFxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX1VTRVIgfHwgJ2NleF91c2VyJyxcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX1BBU1NXT1JEIHx8ICdjZXhfcGFzc3dvcmRfMjAyNCcsXG4gIG1heDogMjAsIC8vIG1heGltdW0gbnVtYmVyIG9mIGNsaWVudHMgaW4gdGhlIHBvb2xcbiAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLCAvLyBob3cgbG9uZyBhIGNsaWVudCBpcyBhbGxvd2VkIHRvIHJlbWFpbiBpZGxlXG4gIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAyMDAwLCAvLyBob3cgbG9uZyB0byB3YWl0IHdoZW4gY29ubmVjdGluZyBhIGNsaWVudFxuICBzc2w6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB7XG4gICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICB9IDogZmFsc2Vcbn07XG5cbi8vIENyZWF0ZSBQb3N0Z3JlU1FMIHBvb2xcbmNvbnN0IHBnUG9vbCA9IG5ldyBQb29sKHBnQ29uZmlnKTtcblxuLy8gQ3JlYXRlIFNlcXVlbGl6ZSBpbnN0YW5jZVxuY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShcbiAgcGdDb25maWcuZGF0YWJhc2UsXG4gIHBnQ29uZmlnLnVzZXIsXG4gIHBnQ29uZmlnLnBhc3N3b3JkLFxuICB7XG4gICAgaG9zdDogcGdDb25maWcuaG9zdCxcbiAgICBwb3J0OiBwZ0NvbmZpZy5wb3J0LFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgbG9nZ2luZzogY29uc29sZS5sb2csIC8vIEVuYWJsZSBTUUwgcXVlcnkgbG9nZ2luZyB0byBzZWUgc2xvdyBxdWVyaWVzXG4gICAgcG9vbDoge1xuICAgICAgbWF4OiAyMCxcbiAgICAgIG1pbjogMCxcbiAgICAgIGFjcXVpcmU6IDMwMDAwLFxuICAgICAgaWRsZTogMTAwMDBcbiAgICB9LFxuICAgIHNzbDogcGdDb25maWcuc3NsXG4gIH1cbik7XG5cbi8vIE1vbmdvREIgY29uZmlndXJhdGlvblxuY29uc3QgbW9uZ29Db25maWcgPSB7XG4gIHVyaTogcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvY2V4X2V4Y2hhbmdlJyxcbiAgb3B0aW9uczoge1xuICAgIG1heFBvb2xTaXplOiAxMCwgLy8gTWFpbnRhaW4gdXAgdG8gMTAgc29ja2V0IGNvbm5lY3Rpb25zXG4gICAgc2VydmVyU2VsZWN0aW9uVGltZW91dE1TOiA1MDAwLCAvLyBLZWVwIHRyeWluZyB0byBzZW5kIG9wZXJhdGlvbnMgZm9yIDUgc2Vjb25kc1xuICAgIHNvY2tldFRpbWVvdXRNUzogNDUwMDAsIC8vIENsb3NlIHNvY2tldHMgYWZ0ZXIgNDUgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLCAvLyBEaXNhYmxlIG1vbmdvb3NlIGJ1ZmZlcmluZ1xuICB9XG59O1xuXG4vLyBQb3N0Z3JlU1FMIGNvbm5lY3Rpb24gdGVzdFxucGdQb29sLm9uKCdjb25uZWN0JywgKGNsaWVudCkgPT4ge1xuICBjb25zb2xlLmxvZygnUG9zdGdyZVNRTCBjbGllbnQgY29ubmVjdGVkJyk7XG59KTtcblxucGdQb29sLm9uKCdlcnJvcicsIChlcnIsIGNsaWVudCkgPT4ge1xuICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIG9uIGlkbGUgUG9zdGdyZVNRTCBjbGllbnQnLCBlcnIpO1xuICBwcm9jZXNzLmV4aXQoLTEpO1xufSk7XG5cbi8vIE1vbmdvREIgY29ubmVjdGlvbiBldmVudHMgd2lsbCBiZSBzZXQgdXAgYWZ0ZXIgY29ubmVjdGlvblxuLy8gVGhpcyBwcmV2ZW50cyBpc3N1ZXMgZHVyaW5nIHRlc3QgaW5pdGlhbGl6YXRpb25cblxuLy8gQ29ubmVjdCB0byBNb25nb0RCXG5jb25zdCBjb25uZWN0TW9uZ29EQiA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KG1vbmdvQ29uZmlnLnVyaSwgbW9uZ29Db25maWcub3B0aW9ucyk7XG4gICAgY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufTtcblxuLy8gRGF0YWJhc2UgcXVlcnkgaGVscGVyc1xuY29uc3QgcXVlcnkgPSBhc3luYyAodGV4dCwgcGFyYW1zKSA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBwZ1Bvb2wucXVlcnkodGV4dCwgcGFyYW1zKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBjb25zb2xlLmxvZygnRXhlY3V0ZWQgcXVlcnknLCB7IHRleHQsIGR1cmF0aW9uLCByb3dzOiByZXMucm93Q291bnQgfSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbi8vIFRyYW5zYWN0aW9uIGhlbHBlclxuY29uc3QgdHJhbnNhY3Rpb24gPSBhc3luYyAoY2FsbGJhY2spID0+IHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcGdQb29sLmNvbm5lY3QoKTtcbiAgdHJ5IHtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ0JFR0lOJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2FsbGJhY2soY2xpZW50KTtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ0NPTU1JVCcpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdST0xMQkFDSycpO1xuICAgIHRocm93IGVycm9yO1xuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gIH1cbn07XG5cbi8vIERhdGFiYXNlIGhlYWx0aCBjaGVja1xuY29uc3QgaGVhbHRoQ2hlY2sgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGNoZWNrcyA9IHtcbiAgICBwb3N0Z3Jlc3FsOiBmYWxzZSxcbiAgICBtb25nb2RiOiBmYWxzZVxuICB9O1xuXG4gIHRyeSB7XG4gICAgLy8gUG9zdGdyZVNRTCBoZWFsdGggY2hlY2tcbiAgICBjb25zdCBwZ1Jlc3VsdCA9IGF3YWl0IHBnUG9vbC5xdWVyeSgnU0VMRUNUIE5PVygpJyk7XG4gICAgY2hlY2tzLnBvc3RncmVzcWwgPSAhIXBnUmVzdWx0LnJvd3NbMF07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignUG9zdGdyZVNRTCBoZWFsdGggY2hlY2sgZmFpbGVkOicsIGVycm9yKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gTW9uZ29EQiBoZWFsdGggY2hlY2tcbiAgICBjb25zdCBtb25nb1Jlc3VsdCA9IGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uZGIuYWRtaW4oKS5waW5nKCk7XG4gICAgY2hlY2tzLm1vbmdvZGIgPSBtb25nb1Jlc3VsdC5vayA9PT0gMTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdNb25nb0RCIGhlYWx0aCBjaGVjayBmYWlsZWQ6JywgZXJyb3IpO1xuICB9XG5cbiAgcmV0dXJuIGNoZWNrcztcbn07XG5cbi8vIEdyYWNlZnVsIHNodXRkb3duXG5jb25zdCBjbG9zZUNvbm5lY3Rpb25zID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIGF3YWl0IHBnUG9vbC5lbmQoKTtcbiAgICBjb25zb2xlLmxvZygnUG9zdGdyZVNRTCBwb29sIGNsb3NlZCcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsb3NpbmcgUG9zdGdyZVNRTCBwb29sOicsIGVycm9yKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgIGNvbnNvbGUubG9nKCdNb25nb0RCIGNvbm5lY3Rpb24gY2xvc2VkJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xvc2luZyBNb25nb0RCIGNvbm5lY3Rpb246JywgZXJyb3IpO1xuICB9XG59O1xuXG4vLyBJbml0aWFsaXplIGRhdGFiYXNlIGNvbm5lY3Rpb25zXG5jb25zdCBpbml0aWFsaXplRGF0YWJhc2UgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gVGVzdCBQb3N0Z3JlU1FMIGNvbm5lY3Rpb25cbiAgICBhd2FpdCBwZ1Bvb2wucXVlcnkoJ1NFTEVDVCBOT1coKScpO1xuICAgIGNvbnNvbGUubG9nKCdQb3N0Z3JlU1FMIGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bCcpO1xuXG4gICAgLy8gQ29ubmVjdCB0byBNb25nb0RCXG4gICAgYXdhaXQgY29ubmVjdE1vbmdvREIoKTtcblxuICAgIGNvbnNvbGUubG9nKCdBbGwgZGF0YWJhc2UgY29ubmVjdGlvbnMgZXN0YWJsaXNoZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgaW5pdGlhbGl6YXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn07XG5cbi8vIEV4cG9ydCBkYXRhYmFzZSB1dGlsaXRpZXNcbm1vZHVsZS5leHBvcnRzID0ge1xuICBwZ1Bvb2wsXG4gIG1vbmdvb3NlLFxuICBzZXF1ZWxpemUsXG4gIHF1ZXJ5LFxuICB0cmFuc2FjdGlvbixcbiAgaGVhbHRoQ2hlY2ssXG4gIGNsb3NlQ29ubmVjdGlvbnMsXG4gIGluaXRpYWxpemVEYXRhYmFzZVxufTtcblxuLy8gSW5pdGlhbGl6ZSBjb25uZWN0aW9ucyB3aGVuIG1vZHVsZSBpcyBsb2FkZWRcbmluaXRpYWxpemVEYXRhYmFzZSgpOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFLLENBQUMsR0FBR0MsT0FBTyxDQUFDLElBQUksQ0FBQztBQUM5QixNQUFNQyxRQUFRLEdBQUdELE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTTtFQUFFRTtBQUFVLENBQUMsR0FBR0YsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUMxQyxNQUFNO0VBQUVHO0FBQVUsQ0FBQyxHQUFHSCxPQUFPLENBQUMsTUFBTSxDQUFDOztBQUVyQztBQUNBLE1BQU1JLFFBQVEsR0FBRztFQUNmQyxJQUFJLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxPQUFPLElBQUlGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxhQUFhLElBQUksV0FBVztFQUNyRUMsSUFBSSxFQUFFSixPQUFPLENBQUNDLEdBQUcsQ0FBQ0ksT0FBTyxJQUFJTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssYUFBYSxJQUFJLElBQUk7RUFDOURDLFFBQVEsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLE9BQU8sSUFBSVIsT0FBTyxDQUFDQyxHQUFHLENBQUNRLFdBQVcsSUFBSSxRQUFRO0VBQ3BFQyxJQUFJLEVBQUVWLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDVSxPQUFPLElBQUlYLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDVyxhQUFhLElBQUksVUFBVTtFQUNwRUMsUUFBUSxFQUFFYixPQUFPLENBQUNDLEdBQUcsQ0FBQ2EsV0FBVyxJQUFJZCxPQUFPLENBQUNDLEdBQUcsQ0FBQ2MsaUJBQWlCLElBQUksbUJBQW1CO0VBQ3pGQyxHQUFHLEVBQUUsRUFBRTtFQUFFO0VBQ1RDLGlCQUFpQixFQUFFLEtBQUs7RUFBRTtFQUMxQkMsdUJBQXVCLEVBQUUsSUFBSTtFQUFFO0VBQy9CQyxHQUFHLEVBQUVuQixPQUFPLENBQUNDLEdBQUcsQ0FBQ21CLFFBQVEsS0FBSyxZQUFZLEdBQUc7SUFDM0NDLGtCQUFrQixFQUFFO0VBQ3RCLENBQUMsR0FBRztBQUNOLENBQUM7O0FBRUQ7QUFDQSxNQUFNQyxNQUFNLEdBQUcsSUFBSTdCLElBQUksQ0FBQ0ssUUFBUSxDQUFDOztBQUVqQztBQUNBLE1BQU15QixTQUFTLEdBQUcsSUFBSTNCLFNBQVMsQ0FDN0JFLFFBQVEsQ0FBQ1MsUUFBUSxFQUNqQlQsUUFBUSxDQUFDWSxJQUFJLEVBQ2JaLFFBQVEsQ0FBQ2UsUUFBUSxFQUNqQjtFQUNFZCxJQUFJLEVBQUVELFFBQVEsQ0FBQ0MsSUFBSTtFQUNuQkssSUFBSSxFQUFFTixRQUFRLENBQUNNLElBQUk7RUFDbkJvQixPQUFPLEVBQUUsVUFBVTtFQUNuQkMsT0FBTyxFQUFFQyxPQUFPLENBQUNDLEdBQUc7RUFBRTtFQUN0QkMsSUFBSSxFQUFFO0lBQ0paLEdBQUcsRUFBRSxFQUFFO0lBQ1BhLEdBQUcsRUFBRSxDQUFDO0lBQ05DLE9BQU8sRUFBRSxLQUFLO0lBQ2RDLElBQUksRUFBRTtFQUNSLENBQUM7RUFDRFosR0FBRyxFQUFFckIsUUFBUSxDQUFDcUI7QUFDaEIsQ0FDRixDQUFDOztBQUVEO0FBQ0EsTUFBTWEsV0FBVyxHQUFHO0VBQ2xCQyxHQUFHLEVBQUVqQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ2lDLFdBQVcsSUFBSSx3Q0FBd0M7RUFDeEVDLE9BQU8sRUFBRTtJQUNQQyxXQUFXLEVBQUUsRUFBRTtJQUFFO0lBQ2pCQyx3QkFBd0IsRUFBRSxJQUFJO0lBQUU7SUFDaENDLGVBQWUsRUFBRSxLQUFLO0lBQUU7SUFDeEJDLGNBQWMsRUFBRSxLQUFLLENBQUU7RUFDekI7QUFDRixDQUFDOztBQUVEO0FBQ0FqQixNQUFNLENBQUNrQixFQUFFLENBQUMsU0FBUyxFQUFHQyxNQUFNLElBQUs7RUFDL0JmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZCQUE2QixDQUFDO0FBQzVDLENBQUMsQ0FBQztBQUVGTCxNQUFNLENBQUNrQixFQUFFLENBQUMsT0FBTyxFQUFFLENBQUNFLEdBQUcsRUFBRUQsTUFBTSxLQUFLO0VBQ2xDZixPQUFPLENBQUNpQixLQUFLLENBQUMsNENBQTRDLEVBQUVELEdBQUcsQ0FBQztFQUNoRTFDLE9BQU8sQ0FBQzRDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQixDQUFDLENBQUM7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLE1BQU1DLGNBQWMsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDakMsSUFBSTtJQUNGLE1BQU1sRCxRQUFRLENBQUNtRCxPQUFPLENBQUNkLFdBQVcsQ0FBQ0MsR0FBRyxFQUFFRCxXQUFXLENBQUNHLE9BQU8sQ0FBQztJQUM1RFQsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0NBQWdDLENBQUM7RUFDL0MsQ0FBQyxDQUFDLE9BQU9nQixLQUFLLEVBQUU7SUFDZGpCLE9BQU8sQ0FBQ2lCLEtBQUssQ0FBQyw0QkFBNEIsRUFBRUEsS0FBSyxDQUFDO0lBQ2xEM0MsT0FBTyxDQUFDNEMsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNqQjtBQUNGLENBQUM7O0FBRUQ7QUFDQSxNQUFNRyxLQUFLLEdBQUcsTUFBQUEsQ0FBT0MsSUFBSSxFQUFFQyxNQUFNLEtBQUs7RUFDcEMsTUFBTUMsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0VBQ3hCLElBQUk7SUFDRixNQUFNQyxHQUFHLEdBQUcsTUFBTS9CLE1BQU0sQ0FBQ3lCLEtBQUssQ0FBQ0MsSUFBSSxFQUFFQyxNQUFNLENBQUM7SUFDNUMsTUFBTUssUUFBUSxHQUFHSCxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLEtBQUs7SUFDbkN4QixPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtNQUFFcUIsSUFBSTtNQUFFTSxRQUFRO01BQUVDLElBQUksRUFBRUYsR0FBRyxDQUFDRztJQUFTLENBQUMsQ0FBQztJQUNyRSxPQUFPSCxHQUFHO0VBQ1osQ0FBQyxDQUFDLE9BQU9WLEtBQUssRUFBRTtJQUNkakIsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLHVCQUF1QixFQUFFQSxLQUFLLENBQUM7SUFDN0MsTUFBTUEsS0FBSztFQUNiO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBLE1BQU1jLFdBQVcsR0FBRyxNQUFPQyxRQUFRLElBQUs7RUFDdEMsTUFBTWpCLE1BQU0sR0FBRyxNQUFNbkIsTUFBTSxDQUFDd0IsT0FBTyxDQUFDLENBQUM7RUFDckMsSUFBSTtJQUNGLE1BQU1MLE1BQU0sQ0FBQ00sS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUMzQixNQUFNWSxNQUFNLEdBQUcsTUFBTUQsUUFBUSxDQUFDakIsTUFBTSxDQUFDO0lBQ3JDLE1BQU1BLE1BQU0sQ0FBQ00sS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUM1QixPQUFPWSxNQUFNO0VBQ2YsQ0FBQyxDQUFDLE9BQU9oQixLQUFLLEVBQUU7SUFDZCxNQUFNRixNQUFNLENBQUNNLEtBQUssQ0FBQyxVQUFVLENBQUM7SUFDOUIsTUFBTUosS0FBSztFQUNiLENBQUMsU0FBUztJQUNSRixNQUFNLENBQUNtQixPQUFPLENBQUMsQ0FBQztFQUNsQjtBQUNGLENBQUM7O0FBRUQ7QUFDQSxNQUFNQyxXQUFXLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQzlCLE1BQU1DLE1BQU0sR0FBRztJQUNiQyxVQUFVLEVBQUUsS0FBSztJQUNqQkMsT0FBTyxFQUFFO0VBQ1gsQ0FBQztFQUVELElBQUk7SUFDRjtJQUNBLE1BQU1DLFFBQVEsR0FBRyxNQUFNM0MsTUFBTSxDQUFDeUIsS0FBSyxDQUFDLGNBQWMsQ0FBQztJQUNuRGUsTUFBTSxDQUFDQyxVQUFVLEdBQUcsQ0FBQyxDQUFDRSxRQUFRLENBQUNWLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDeEMsQ0FBQyxDQUFDLE9BQU9aLEtBQUssRUFBRTtJQUNkakIsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLGlDQUFpQyxFQUFFQSxLQUFLLENBQUM7RUFDekQ7RUFFQSxJQUFJO0lBQ0Y7SUFDQSxNQUFNdUIsV0FBVyxHQUFHLE1BQU12RSxRQUFRLENBQUN3RSxVQUFVLENBQUNDLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUM7SUFDL0RSLE1BQU0sQ0FBQ0UsT0FBTyxHQUFHRSxXQUFXLENBQUNLLEVBQUUsS0FBSyxDQUFDO0VBQ3ZDLENBQUMsQ0FBQyxPQUFPNUIsS0FBSyxFQUFFO0lBQ2RqQixPQUFPLENBQUNpQixLQUFLLENBQUMsOEJBQThCLEVBQUVBLEtBQUssQ0FBQztFQUN0RDtFQUVBLE9BQU9tQixNQUFNO0FBQ2YsQ0FBQzs7QUFFRDtBQUNBLE1BQU1VLGdCQUFnQixHQUFHLE1BQUFBLENBQUEsS0FBWTtFQUNuQyxJQUFJO0lBQ0YsTUFBTWxELE1BQU0sQ0FBQ21ELEdBQUcsQ0FBQyxDQUFDO0lBQ2xCL0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsd0JBQXdCLENBQUM7RUFDdkMsQ0FBQyxDQUFDLE9BQU9nQixLQUFLLEVBQUU7SUFDZGpCLE9BQU8sQ0FBQ2lCLEtBQUssQ0FBQyxnQ0FBZ0MsRUFBRUEsS0FBSyxDQUFDO0VBQ3hEO0VBRUEsSUFBSTtJQUNGLE1BQU1oRCxRQUFRLENBQUN3RSxVQUFVLENBQUNPLEtBQUssQ0FBQyxDQUFDO0lBQ2pDaEQsT0FBTyxDQUFDQyxHQUFHLENBQUMsMkJBQTJCLENBQUM7RUFDMUMsQ0FBQyxDQUFDLE9BQU9nQixLQUFLLEVBQUU7SUFDZGpCLE9BQU8sQ0FBQ2lCLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRUEsS0FBSyxDQUFDO0VBQzNEO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBLE1BQU1nQyxrQkFBa0IsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDckMsSUFBSTtJQUNGO0lBQ0EsTUFBTXJELE1BQU0sQ0FBQ3lCLEtBQUssQ0FBQyxjQUFjLENBQUM7SUFDbENyQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQzs7SUFFL0M7SUFDQSxNQUFNa0IsY0FBYyxDQUFDLENBQUM7SUFFdEJuQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxtREFBbUQsQ0FBQztFQUNsRSxDQUFDLENBQUMsT0FBT2dCLEtBQUssRUFBRTtJQUNkakIsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLGlDQUFpQyxFQUFFQSxLQUFLLENBQUM7SUFDdkQzQyxPQUFPLENBQUM0QyxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ2pCO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBZ0MsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDZnZELE1BQU07RUFDTjNCLFFBQVE7RUFDUjRCLFNBQVM7RUFDVHdCLEtBQUs7RUFDTFUsV0FBVztFQUNYSSxXQUFXO0VBQ1hXLGdCQUFnQjtFQUNoQkc7QUFDRixDQUFDOztBQUVEO0FBQ0FBLGtCQUFrQixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=