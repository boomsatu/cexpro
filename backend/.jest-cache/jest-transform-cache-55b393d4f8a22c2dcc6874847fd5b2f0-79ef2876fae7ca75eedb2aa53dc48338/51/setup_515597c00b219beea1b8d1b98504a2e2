2853db82645ed6cf001ff29889837358
// Mock database modules for testing

// Mock external services
_getJestObj().mock('../src/models', () => ({
  sequelize: {
    authenticate: jest.fn().mockResolvedValue(true),
    sync: jest.fn().mockResolvedValue(true),
    close: jest.fn().mockResolvedValue(true),
    truncate: jest.fn().mockResolvedValue(true)
  },
  User: {
    findOne: jest.fn(),
    create: jest.fn(),
    findAll: jest.fn()
  },
  TradingPair: {
    findOne: jest.fn(),
    create: jest.fn(),
    findAll: jest.fn()
  },
  Order: {
    findOne: jest.fn(),
    create: jest.fn(),
    findAll: jest.fn()
  },
  Balance: {
    findOne: jest.fn(),
    create: jest.fn(),
    findAll: jest.fn()
  }
}));
_getJestObj().mock('../src/config/redis', () => ({
  flushdb: jest.fn().mockResolvedValue('OK'),
  quit: jest.fn().mockResolvedValue('OK'),
  get: jest.fn().mockResolvedValue(null),
  set: jest.fn().mockResolvedValue('OK'),
  del: jest.fn().mockResolvedValue(1)
}));
_getJestObj().mock('mongoose', () => ({
  connect: jest.fn().mockResolvedValue(true),
  connection: {
    readyState: 1,
    close: jest.fn().mockResolvedValue(true)
  }
}));
_getJestObj().mock('../src/services/emailService', () => ({
  sendEmail: jest.fn().mockResolvedValue(true),
  sendVerificationEmail: jest.fn().mockResolvedValue(true),
  sendPasswordResetEmail: jest.fn().mockResolvedValue(true)
}));
_getJestObj().mock('../src/services/smsService', () => ({
  sendSMS: jest.fn().mockResolvedValue(true),
  sendVerificationSMS: jest.fn().mockResolvedValue(true)
}));
// Mock external services
_getJestObj().mock('../src/services/emailService', () => ({
  sendEmail: jest.fn().mockResolvedValue(true),
  sendVerificationEmail: jest.fn().mockResolvedValue(true),
  sendPasswordResetEmail: jest.fn().mockResolvedValue(true)
}));
_getJestObj().mock('../src/services/smsService', () => ({
  sendSMS: jest.fn().mockResolvedValue(true),
  sendVerificationSMS: jest.fn().mockResolvedValue(true)
}));

// Increase timeout for integration tests
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const {
  sequelize
} = require('../src/models');
const redis = require('../src/config/redis');
const mongoose = require('mongoose');

// Setup test environment
process.env.NODE_ENV = 'test';
process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';
process.env.ENCRYPTION_KEY = 'test-encryption-key-32-chars-long';
process.env.REDIS_URL = 'redis://localhost:6379/1'; // Use different DB for tests
process.env.POSTGRES_DB = 'cex_test';
process.env.MONGODB_URI = 'mongodb://localhost:27017/cex_test';

// Global test setup
beforeAll(async () => {
  // Wait for database connections
  await sequelize.authenticate();
  console.log('PostgreSQL connected for testing');

  // Sync database (create tables)
  await sequelize.sync({
    force: true
  });
  console.log('Test database synced');

  // Connect to MongoDB
  if (mongoose.connection.readyState === 0) {
    await mongoose.connect(process.env.MONGODB_URI);
    console.log('MongoDB connected for testing');
  }

  // Clear Redis test database
  await redis.flushdb();
  console.log('Redis test database cleared');
});

// Global test teardown
afterAll(async () => {
  // Close database connections
  await sequelize.close();
  await mongoose.connection.close();
  await redis.quit();
  console.log('Test databases disconnected');
});

// Clear data between tests
beforeEach(async () => {
  // Clear Redis cache
  await redis.flushdb();

  // Truncate all PostgreSQL tables
  await sequelize.truncate({
    cascade: true,
    restartIdentity: true
  });
});

// Test utilities
global.testUtils = {
  // Create test user
  createTestUser: async (userData = {}) => {
    const User = require('../src/models/User');
    const defaultUser = {
      username: 'testuser',
      email: 'test@example.com',
      password: 'TestPassword123!',
      firstName: 'Test',
      lastName: 'User',
      emailVerified: true,
      kycLevel: 1,
      status: 'active'
    };
    return await User.create({
      ...defaultUser,
      ...userData
    });
  },
  // Create test trading pair
  createTestTradingPair: async (pairData = {}) => {
    const TradingPair = require('../src/models/TradingPair');
    const defaultPair = {
      symbol: 'BTC/USDT',
      base_currency: 'BTC',
      quote_currency: 'USDT',
      status: 'active',
      min_order_size: '0.001',
      max_order_size: '1000',
      tick_size: '0.01',
      lot_size: '0.001',
      maker_fee: '0.001',
      taker_fee: '0.002'
    };
    return await TradingPair.create({
      ...defaultPair,
      ...pairData
    });
  },
  // Create test balance
  createTestBalance: async (userId, currencyId, amount = '10000') => {
    const Balance = require('../src/models/Balance');
    return await Balance.create({
      user_id: userId,
      currency_id: currencyId,
      available_balance: amount,
      locked_balance: '0',
      total_balance: amount
    });
  },
  // Generate JWT token for testing
  generateTestToken: userId => {
    const jwt = require('jsonwebtoken');
    return jwt.sign({
      userId,
      type: 'access'
    }, process.env.JWT_SECRET, {
      expiresIn: '1h'
    });
  }
};
jest.setTimeout(30000);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJzZXF1ZWxpemUiLCJhdXRoZW50aWNhdGUiLCJqZXN0IiwiZm4iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInN5bmMiLCJjbG9zZSIsInRydW5jYXRlIiwiVXNlciIsImZpbmRPbmUiLCJjcmVhdGUiLCJmaW5kQWxsIiwiVHJhZGluZ1BhaXIiLCJPcmRlciIsIkJhbGFuY2UiLCJmbHVzaGRiIiwicXVpdCIsImdldCIsInNldCIsImRlbCIsImNvbm5lY3QiLCJjb25uZWN0aW9uIiwicmVhZHlTdGF0ZSIsInNlbmRFbWFpbCIsInNlbmRWZXJpZmljYXRpb25FbWFpbCIsInNlbmRQYXNzd29yZFJlc2V0RW1haWwiLCJzZW5kU01TIiwic2VuZFZlcmlmaWNhdGlvblNNUyIsInJlcXVpcmUiLCJyZWRpcyIsIm1vbmdvb3NlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiSldUX1NFQ1JFVCIsIkVOQ1JZUFRJT05fS0VZIiwiUkVESVNfVVJMIiwiUE9TVEdSRVNfREIiLCJNT05HT0RCX1VSSSIsImJlZm9yZUFsbCIsImNvbnNvbGUiLCJsb2ciLCJmb3JjZSIsImFmdGVyQWxsIiwiYmVmb3JlRWFjaCIsImNhc2NhZGUiLCJyZXN0YXJ0SWRlbnRpdHkiLCJnbG9iYWwiLCJ0ZXN0VXRpbHMiLCJjcmVhdGVUZXN0VXNlciIsInVzZXJEYXRhIiwiZGVmYXVsdFVzZXIiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsVmVyaWZpZWQiLCJreWNMZXZlbCIsInN0YXR1cyIsImNyZWF0ZVRlc3RUcmFkaW5nUGFpciIsInBhaXJEYXRhIiwiZGVmYXVsdFBhaXIiLCJzeW1ib2wiLCJiYXNlX2N1cnJlbmN5IiwicXVvdGVfY3VycmVuY3kiLCJtaW5fb3JkZXJfc2l6ZSIsIm1heF9vcmRlcl9zaXplIiwidGlja19zaXplIiwibG90X3NpemUiLCJtYWtlcl9mZWUiLCJ0YWtlcl9mZWUiLCJjcmVhdGVUZXN0QmFsYW5jZSIsInVzZXJJZCIsImN1cnJlbmN5SWQiLCJhbW91bnQiLCJ1c2VyX2lkIiwiY3VycmVuY3lfaWQiLCJhdmFpbGFibGVfYmFsYW5jZSIsImxvY2tlZF9iYWxhbmNlIiwidG90YWxfYmFsYW5jZSIsImdlbmVyYXRlVGVzdFRva2VuIiwiand0Iiwic2lnbiIsInR5cGUiLCJleHBpcmVzSW4iLCJzZXRUaW1lb3V0Il0sInNvdXJjZXMiOlsic2V0dXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTW9jayBkYXRhYmFzZSBtb2R1bGVzIGZvciB0ZXN0aW5nXG5qZXN0Lm1vY2soJy4uL3NyYy9tb2RlbHMnLCAoKSA9PiAoe1xuICBzZXF1ZWxpemU6IHtcbiAgICBhdXRoZW50aWNhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbiAgICBzeW5jOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gICAgY2xvc2U6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbiAgICB0cnVuY2F0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXG4gIH0sXG4gIFVzZXI6IHtcbiAgICBmaW5kT25lOiBqZXN0LmZuKCksXG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgZmluZEFsbDogamVzdC5mbigpXG4gIH0sXG4gIFRyYWRpbmdQYWlyOiB7XG4gICAgZmluZE9uZTogamVzdC5mbigpLFxuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGZpbmRBbGw6IGplc3QuZm4oKVxuICB9LFxuICBPcmRlcjoge1xuICAgIGZpbmRPbmU6IGplc3QuZm4oKSxcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICBmaW5kQWxsOiBqZXN0LmZuKClcbiAgfSxcbiAgQmFsYW5jZToge1xuICAgIGZpbmRPbmU6IGplc3QuZm4oKSxcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICBmaW5kQWxsOiBqZXN0LmZuKClcbiAgfVxufSkpO1xuXG5qZXN0Lm1vY2soJy4uL3NyYy9jb25maWcvcmVkaXMnLCAoKSA9PiAoe1xuICBmbHVzaGRiOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ09LJyksXG4gIHF1aXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnT0snKSxcbiAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobnVsbCksXG4gIHNldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCdPSycpLFxuICBkZWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgxKVxufSkpO1xuXG5qZXN0Lm1vY2soJ21vbmdvb3NlJywgKCkgPT4gKHtcbiAgY29ubmVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICBjb25uZWN0aW9uOiB7XG4gICAgcmVhZHlTdGF0ZTogMSxcbiAgICBjbG9zZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXG4gIH1cbn0pKTtcblxuLy8gTW9jayBleHRlcm5hbCBzZXJ2aWNlc1xuamVzdC5tb2NrKCcuLi9zcmMvc2VydmljZXMvZW1haWxTZXJ2aWNlJywgKCkgPT4gKHtcbiAgc2VuZEVtYWlsOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gIHNlbmRWZXJpZmljYXRpb25FbWFpbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICBzZW5kUGFzc3dvcmRSZXNldEVtYWlsOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSlcbn0pKTtcblxuamVzdC5tb2NrKCcuLi9zcmMvc2VydmljZXMvc21zU2VydmljZScsICgpID0+ICh7XG4gIHNlbmRTTVM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbiAgc2VuZFZlcmlmaWNhdGlvblNNUzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXG59KSk7XG5cbmNvbnN0IHsgc2VxdWVsaXplIH0gPSByZXF1aXJlKCcuLi9zcmMvbW9kZWxzJyk7XG5jb25zdCByZWRpcyA9IHJlcXVpcmUoJy4uL3NyYy9jb25maWcvcmVkaXMnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxuLy8gU2V0dXAgdGVzdCBlbnZpcm9ubWVudFxucHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSAndGVzdCc7XG5wcm9jZXNzLmVudi5KV1RfU0VDUkVUID0gJ3Rlc3Qtand0LXNlY3JldC1rZXktZm9yLXRlc3Rpbmctb25seSc7XG5wcm9jZXNzLmVudi5FTkNSWVBUSU9OX0tFWSA9ICd0ZXN0LWVuY3J5cHRpb24ta2V5LTMyLWNoYXJzLWxvbmcnO1xucHJvY2Vzcy5lbnYuUkVESVNfVVJMID0gJ3JlZGlzOi8vbG9jYWxob3N0OjYzNzkvMSc7IC8vIFVzZSBkaWZmZXJlbnQgREIgZm9yIHRlc3RzXG5wcm9jZXNzLmVudi5QT1NUR1JFU19EQiA9ICdjZXhfdGVzdCc7XG5wcm9jZXNzLmVudi5NT05HT0RCX1VSSSA9ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2NleF90ZXN0JztcblxuLy8gR2xvYmFsIHRlc3Qgc2V0dXBcbmJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gIC8vIFdhaXQgZm9yIGRhdGFiYXNlIGNvbm5lY3Rpb25zXG4gIGF3YWl0IHNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKTtcbiAgY29uc29sZS5sb2coJ1Bvc3RncmVTUUwgY29ubmVjdGVkIGZvciB0ZXN0aW5nJyk7XG4gIFxuICAvLyBTeW5jIGRhdGFiYXNlIChjcmVhdGUgdGFibGVzKVxuICBhd2FpdCBzZXF1ZWxpemUuc3luYyh7IGZvcmNlOiB0cnVlIH0pO1xuICBjb25zb2xlLmxvZygnVGVzdCBkYXRhYmFzZSBzeW5jZWQnKTtcbiAgXG4gIC8vIENvbm5lY3QgdG8gTW9uZ29EQlxuICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlID09PSAwKSB7XG4gICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT0RCX1VSSSk7XG4gICAgY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGVkIGZvciB0ZXN0aW5nJyk7XG4gIH1cbiAgXG4gIC8vIENsZWFyIFJlZGlzIHRlc3QgZGF0YWJhc2VcbiAgYXdhaXQgcmVkaXMuZmx1c2hkYigpO1xuICBjb25zb2xlLmxvZygnUmVkaXMgdGVzdCBkYXRhYmFzZSBjbGVhcmVkJyk7XG59KTtcblxuLy8gR2xvYmFsIHRlc3QgdGVhcmRvd25cbmFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgLy8gQ2xvc2UgZGF0YWJhc2UgY29ubmVjdGlvbnNcbiAgYXdhaXQgc2VxdWVsaXplLmNsb3NlKCk7XG4gIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgYXdhaXQgcmVkaXMucXVpdCgpO1xuICBjb25zb2xlLmxvZygnVGVzdCBkYXRhYmFzZXMgZGlzY29ubmVjdGVkJyk7XG59KTtcblxuLy8gQ2xlYXIgZGF0YSBiZXR3ZWVuIHRlc3RzXG5iZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgLy8gQ2xlYXIgUmVkaXMgY2FjaGVcbiAgYXdhaXQgcmVkaXMuZmx1c2hkYigpO1xuICBcbiAgLy8gVHJ1bmNhdGUgYWxsIFBvc3RncmVTUUwgdGFibGVzXG4gIGF3YWl0IHNlcXVlbGl6ZS50cnVuY2F0ZSh7IGNhc2NhZGU6IHRydWUsIHJlc3RhcnRJZGVudGl0eTogdHJ1ZSB9KTtcbn0pO1xuXG4vLyBUZXN0IHV0aWxpdGllc1xuZ2xvYmFsLnRlc3RVdGlscyA9IHtcbiAgLy8gQ3JlYXRlIHRlc3QgdXNlclxuICBjcmVhdGVUZXN0VXNlcjogYXN5bmMgKHVzZXJEYXRhID0ge30pID0+IHtcbiAgICBjb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vc3JjL21vZGVscy9Vc2VyJyk7XG4gICAgY29uc3QgZGVmYXVsdFVzZXIgPSB7XG4gICAgICB1c2VybmFtZTogJ3Rlc3R1c2VyJyxcbiAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICBwYXNzd29yZDogJ1Rlc3RQYXNzd29yZDEyMyEnLFxuICAgICAgZmlyc3ROYW1lOiAnVGVzdCcsXG4gICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgZW1haWxWZXJpZmllZDogdHJ1ZSxcbiAgICAgIGt5Y0xldmVsOiAxLFxuICAgICAgc3RhdHVzOiAnYWN0aXZlJ1xuICAgIH07XG4gICAgcmV0dXJuIGF3YWl0IFVzZXIuY3JlYXRlKHsgLi4uZGVmYXVsdFVzZXIsIC4uLnVzZXJEYXRhIH0pO1xuICB9LFxuICBcbiAgLy8gQ3JlYXRlIHRlc3QgdHJhZGluZyBwYWlyXG4gIGNyZWF0ZVRlc3RUcmFkaW5nUGFpcjogYXN5bmMgKHBhaXJEYXRhID0ge30pID0+IHtcbiAgICBjb25zdCBUcmFkaW5nUGFpciA9IHJlcXVpcmUoJy4uL3NyYy9tb2RlbHMvVHJhZGluZ1BhaXInKTtcbiAgICBjb25zdCBkZWZhdWx0UGFpciA9IHtcbiAgICAgIHN5bWJvbDogJ0JUQy9VU0RUJyxcbiAgICAgIGJhc2VfY3VycmVuY3k6ICdCVEMnLFxuICAgICAgcXVvdGVfY3VycmVuY3k6ICdVU0RUJyxcbiAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICBtaW5fb3JkZXJfc2l6ZTogJzAuMDAxJyxcbiAgICAgIG1heF9vcmRlcl9zaXplOiAnMTAwMCcsXG4gICAgICB0aWNrX3NpemU6ICcwLjAxJyxcbiAgICAgIGxvdF9zaXplOiAnMC4wMDEnLFxuICAgICAgbWFrZXJfZmVlOiAnMC4wMDEnLFxuICAgICAgdGFrZXJfZmVlOiAnMC4wMDInXG4gICAgfTtcbiAgICByZXR1cm4gYXdhaXQgVHJhZGluZ1BhaXIuY3JlYXRlKHsgLi4uZGVmYXVsdFBhaXIsIC4uLnBhaXJEYXRhIH0pO1xuICB9LFxuICBcbiAgLy8gQ3JlYXRlIHRlc3QgYmFsYW5jZVxuICBjcmVhdGVUZXN0QmFsYW5jZTogYXN5bmMgKHVzZXJJZCwgY3VycmVuY3lJZCwgYW1vdW50ID0gJzEwMDAwJykgPT4ge1xuICAgIGNvbnN0IEJhbGFuY2UgPSByZXF1aXJlKCcuLi9zcmMvbW9kZWxzL0JhbGFuY2UnKTtcbiAgICByZXR1cm4gYXdhaXQgQmFsYW5jZS5jcmVhdGUoe1xuICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgY3VycmVuY3lfaWQ6IGN1cnJlbmN5SWQsXG4gICAgICBhdmFpbGFibGVfYmFsYW5jZTogYW1vdW50LFxuICAgICAgbG9ja2VkX2JhbGFuY2U6ICcwJyxcbiAgICAgIHRvdGFsX2JhbGFuY2U6IGFtb3VudFxuICAgIH0pO1xuICB9LFxuICBcbiAgLy8gR2VuZXJhdGUgSldUIHRva2VuIGZvciB0ZXN0aW5nXG4gIGdlbmVyYXRlVGVzdFRva2VuOiAodXNlcklkKSA9PiB7XG4gICAgY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG4gICAgcmV0dXJuIGp3dC5zaWduKFxuICAgICAgeyB1c2VySWQsIHR5cGU6ICdhY2Nlc3MnIH0sXG4gICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxuICAgICAgeyBleHBpcmVzSW46ICcxaCcgfVxuICAgICk7XG4gIH1cbn07XG5cbi8vIE1vY2sgZXh0ZXJuYWwgc2VydmljZXNcbmplc3QubW9jaygnLi4vc3JjL3NlcnZpY2VzL2VtYWlsU2VydmljZScsICgpID0+ICh7XG4gIHNlbmRFbWFpbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICBzZW5kVmVyaWZpY2F0aW9uRW1haWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbiAgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXG59KSk7XG5cbmplc3QubW9jaygnLi4vc3JjL3NlcnZpY2VzL3Ntc1NlcnZpY2UnLCAoKSA9PiAoe1xuICBzZW5kU01TOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gIHNlbmRWZXJpZmljYXRpb25TTVM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKVxufSkpO1xuXG4vLyBJbmNyZWFzZSB0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