00a67d4cd1c4bdedb47c4b1816f4df8d
const {
  Pool
} = require('pg');
const mongoose = require('mongoose');
const {
  Sequelize
} = require('sequelize');
const {
  promisify
} = require('util');

// PostgreSQL configuration
const pgConfig = {
  host: process.env.DB_HOST || process.env.POSTGRES_HOST || 'localhost',
  port: process.env.DB_PORT || process.env.POSTGRES_PORT || 5432,
  database: process.env.DB_NAME || process.env.POSTGRES_DB || 'cex_db',
  user: process.env.DB_USER || process.env.POSTGRES_USER || 'cex_user',
  password: process.env.DB_PASSWORD || process.env.POSTGRES_PASSWORD || 'cex_password_2024',
  max: 20,
  // maximum number of clients in the pool
  idleTimeoutMillis: 30000,
  // how long a client is allowed to remain idle
  connectionTimeoutMillis: 2000,
  // how long to wait when connecting a client
  ssl: process.env.NODE_ENV === 'production' ? {
    rejectUnauthorized: false
  } : false
};

// Create PostgreSQL pool
const pgPool = new Pool(pgConfig);

// Create Sequelize instance
const sequelize = new Sequelize(pgConfig.database, pgConfig.user, pgConfig.password, {
  host: pgConfig.host,
  port: pgConfig.port,
  dialect: 'postgres',
  logging: process.env.NODE_ENV === 'development' ? console.log : false,
  pool: {
    max: 20,
    min: 0,
    acquire: 30000,
    idle: 10000
  },
  ssl: pgConfig.ssl
});

// MongoDB configuration
const mongoConfig = {
  uri: process.env.MONGODB_URI || 'mongodb://localhost:27017/cex_exchange',
  options: {
    maxPoolSize: 10,
    // Maintain up to 10 socket connections
    serverSelectionTimeoutMS: 5000,
    // Keep trying to send operations for 5 seconds
    socketTimeoutMS: 45000,
    // Close sockets after 45 seconds of inactivity
    bufferCommands: false // Disable mongoose buffering
  }
};

// PostgreSQL connection test
pgPool.on('connect', client => {
  console.log('PostgreSQL client connected');
});
pgPool.on('error', (err, client) => {
  console.error('Unexpected error on idle PostgreSQL client', err);
  process.exit(-1);
});

// MongoDB connection events
mongoose.connection.on('connected', () => {
  console.log('MongoDB connected successfully');
});
mongoose.connection.on('error', err => {
  console.error('MongoDB connection error:', err);
});
mongoose.connection.on('disconnected', () => {
  console.log('MongoDB disconnected');
});

// Connect to MongoDB
const connectMongoDB = async () => {
  try {
    await mongoose.connect(mongoConfig.uri, mongoConfig.options);
    console.log('MongoDB connection established');
  } catch (error) {
    console.error('MongoDB connection failed:', error);
    process.exit(1);
  }
};

// Database query helpers
const query = async (text, params) => {
  const start = Date.now();
  try {
    const res = await pgPool.query(text, params);
    const duration = Date.now() - start;
    console.log('Executed query', {
      text,
      duration,
      rows: res.rowCount
    });
    return res;
  } catch (error) {
    console.error('Database query error:', error);
    throw error;
  }
};

// Transaction helper
const transaction = async callback => {
  const client = await pgPool.connect();
  try {
    await client.query('BEGIN');
    const result = await callback(client);
    await client.query('COMMIT');
    return result;
  } catch (error) {
    await client.query('ROLLBACK');
    throw error;
  } finally {
    client.release();
  }
};

// Database health check
const healthCheck = async () => {
  const checks = {
    postgresql: false,
    mongodb: false
  };
  try {
    // PostgreSQL health check
    const pgResult = await pgPool.query('SELECT NOW()');
    checks.postgresql = !!pgResult.rows[0];
  } catch (error) {
    console.error('PostgreSQL health check failed:', error);
  }
  try {
    // MongoDB health check
    const mongoResult = await mongoose.connection.db.admin().ping();
    checks.mongodb = mongoResult.ok === 1;
  } catch (error) {
    console.error('MongoDB health check failed:', error);
  }
  return checks;
};

// Graceful shutdown
const closeConnections = async () => {
  try {
    await pgPool.end();
    console.log('PostgreSQL pool closed');
  } catch (error) {
    console.error('Error closing PostgreSQL pool:', error);
  }
  try {
    await mongoose.connection.close();
    console.log('MongoDB connection closed');
  } catch (error) {
    console.error('Error closing MongoDB connection:', error);
  }
};

// Initialize database connections
const initializeDatabase = async () => {
  try {
    // Test PostgreSQL connection
    await pgPool.query('SELECT NOW()');
    console.log('PostgreSQL connection successful');

    // Connect to MongoDB
    await connectMongoDB();
    console.log('All database connections established successfully');
  } catch (error) {
    console.error('Database initialization failed:', error);
    process.exit(1);
  }
};

// Export database utilities
module.exports = {
  pgPool,
  mongoose,
  sequelize,
  query,
  transaction,
  healthCheck,
  closeConnections,
  initializeDatabase
};

// Initialize connections when module is loaded
initializeDatabase();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sIiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiU2VxdWVsaXplIiwicHJvbWlzaWZ5IiwicGdDb25maWciLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJQT1NUR1JFU19IT1NUIiwicG9ydCIsIkRCX1BPUlQiLCJQT1NUR1JFU19QT1JUIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwiUE9TVEdSRVNfREIiLCJ1c2VyIiwiREJfVVNFUiIsIlBPU1RHUkVTX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiUE9TVEdSRVNfUEFTU1dPUkQiLCJtYXgiLCJpZGxlVGltZW91dE1pbGxpcyIsImNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzIiwic3NsIiwiTk9ERV9FTlYiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJwZ1Bvb2wiLCJzZXF1ZWxpemUiLCJkaWFsZWN0IiwibG9nZ2luZyIsImNvbnNvbGUiLCJsb2ciLCJwb29sIiwibWluIiwiYWNxdWlyZSIsImlkbGUiLCJtb25nb0NvbmZpZyIsInVyaSIsIk1PTkdPREJfVVJJIiwib3B0aW9ucyIsIm1heFBvb2xTaXplIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwiYnVmZmVyQ29tbWFuZHMiLCJvbiIsImNsaWVudCIsImVyciIsImVycm9yIiwiZXhpdCIsImNvbm5lY3Rpb24iLCJjb25uZWN0TW9uZ29EQiIsImNvbm5lY3QiLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJyZXMiLCJkdXJhdGlvbiIsInJvd3MiLCJyb3dDb3VudCIsInRyYW5zYWN0aW9uIiwiY2FsbGJhY2siLCJyZXN1bHQiLCJyZWxlYXNlIiwiaGVhbHRoQ2hlY2siLCJjaGVja3MiLCJwb3N0Z3Jlc3FsIiwibW9uZ29kYiIsInBnUmVzdWx0IiwibW9uZ29SZXN1bHQiLCJkYiIsImFkbWluIiwicGluZyIsIm9rIiwiY2xvc2VDb25uZWN0aW9ucyIsImVuZCIsImNsb3NlIiwiaW5pdGlhbGl6ZURhdGFiYXNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgUG9vbCB9ID0gcmVxdWlyZSgncGcnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHsgU2VxdWVsaXplIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcbmNvbnN0IHsgcHJvbWlzaWZ5IH0gPSByZXF1aXJlKCd1dGlsJyk7XG5cbi8vIFBvc3RncmVTUUwgY29uZmlndXJhdGlvblxuY29uc3QgcGdDb25maWcgPSB7XG4gIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgcHJvY2Vzcy5lbnYuUE9TVEdSRVNfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgcG9ydDogcHJvY2Vzcy5lbnYuREJfUE9SVCB8fCBwcm9jZXNzLmVudi5QT1NUR1JFU19QT1JUIHx8IDU0MzIsXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX0RCIHx8ICdjZXhfZGInLFxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX1VTRVIgfHwgJ2NleF91c2VyJyxcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX1BBU1NXT1JEIHx8ICdjZXhfcGFzc3dvcmRfMjAyNCcsXG4gIG1heDogMjAsIC8vIG1heGltdW0gbnVtYmVyIG9mIGNsaWVudHMgaW4gdGhlIHBvb2xcbiAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLCAvLyBob3cgbG9uZyBhIGNsaWVudCBpcyBhbGxvd2VkIHRvIHJlbWFpbiBpZGxlXG4gIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAyMDAwLCAvLyBob3cgbG9uZyB0byB3YWl0IHdoZW4gY29ubmVjdGluZyBhIGNsaWVudFxuICBzc2w6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB7XG4gICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICB9IDogZmFsc2Vcbn07XG5cbi8vIENyZWF0ZSBQb3N0Z3JlU1FMIHBvb2xcbmNvbnN0IHBnUG9vbCA9IG5ldyBQb29sKHBnQ29uZmlnKTtcblxuLy8gQ3JlYXRlIFNlcXVlbGl6ZSBpbnN0YW5jZVxuY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShcbiAgcGdDb25maWcuZGF0YWJhc2UsXG4gIHBnQ29uZmlnLnVzZXIsXG4gIHBnQ29uZmlnLnBhc3N3b3JkLFxuICB7XG4gICAgaG9zdDogcGdDb25maWcuaG9zdCxcbiAgICBwb3J0OiBwZ0NvbmZpZy5wb3J0LFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgbG9nZ2luZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBjb25zb2xlLmxvZyA6IGZhbHNlLFxuICAgIHBvb2w6IHtcbiAgICAgIG1heDogMjAsXG4gICAgICBtaW46IDAsXG4gICAgICBhY3F1aXJlOiAzMDAwMCxcbiAgICAgIGlkbGU6IDEwMDAwXG4gICAgfSxcbiAgICBzc2w6IHBnQ29uZmlnLnNzbFxuICB9XG4pO1xuXG4vLyBNb25nb0RCIGNvbmZpZ3VyYXRpb25cbmNvbnN0IG1vbmdvQ29uZmlnID0ge1xuICB1cmk6IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2NleF9leGNoYW5nZScsXG4gIG9wdGlvbnM6IHtcbiAgICBtYXhQb29sU2l6ZTogMTAsIC8vIE1haW50YWluIHVwIHRvIDEwIHNvY2tldCBjb25uZWN0aW9uc1xuICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCwgLy8gS2VlcCB0cnlpbmcgdG8gc2VuZCBvcGVyYXRpb25zIGZvciA1IHNlY29uZHNcbiAgICBzb2NrZXRUaW1lb3V0TVM6IDQ1MDAwLCAvLyBDbG9zZSBzb2NrZXRzIGFmdGVyIDQ1IHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSwgLy8gRGlzYWJsZSBtb25nb29zZSBidWZmZXJpbmdcbiAgfVxufTtcblxuLy8gUG9zdGdyZVNRTCBjb25uZWN0aW9uIHRlc3RcbnBnUG9vbC5vbignY29ubmVjdCcsIChjbGllbnQpID0+IHtcbiAgY29uc29sZS5sb2coJ1Bvc3RncmVTUUwgY2xpZW50IGNvbm5lY3RlZCcpO1xufSk7XG5cbnBnUG9vbC5vbignZXJyb3InLCAoZXJyLCBjbGllbnQpID0+IHtcbiAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBlcnJvciBvbiBpZGxlIFBvc3RncmVTUUwgY2xpZW50JywgZXJyKTtcbiAgcHJvY2Vzcy5leGl0KC0xKTtcbn0pO1xuXG4vLyBNb25nb0RCIGNvbm5lY3Rpb24gZXZlbnRzXG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdjb25uZWN0ZWQnLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdNb25nb0RCIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKTtcbn0pO1xuXG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgY29uc29sZS5lcnJvcignTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOicsIGVycik7XG59KTtcblxubW9uZ29vc2UuY29ubmVjdGlvbi5vbignZGlzY29ubmVjdGVkJywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnTW9uZ29EQiBkaXNjb25uZWN0ZWQnKTtcbn0pO1xuXG4vLyBDb25uZWN0IHRvIE1vbmdvREJcbmNvbnN0IGNvbm5lY3RNb25nb0RCID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QobW9uZ29Db25maWcudXJpLCBtb25nb0NvbmZpZy5vcHRpb25zKTtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0aW9uIGVzdGFibGlzaGVkJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59O1xuXG4vLyBEYXRhYmFzZSBxdWVyeSBoZWxwZXJzXG5jb25zdCBxdWVyeSA9IGFzeW5jICh0ZXh0LCBwYXJhbXMpID0+IHtcbiAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHBnUG9vbC5xdWVyeSh0ZXh0LCBwYXJhbXMpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgIGNvbnNvbGUubG9nKCdFeGVjdXRlZCBxdWVyeScsIHsgdGV4dCwgZHVyYXRpb24sIHJvd3M6IHJlcy5yb3dDb3VudCB9KTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHF1ZXJ5IGVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuLy8gVHJhbnNhY3Rpb24gaGVscGVyXG5jb25zdCB0cmFuc2FjdGlvbiA9IGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwZ1Bvb2wuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnQkVHSU4nKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsYmFjayhjbGllbnQpO1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnQ09NTUlUJyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ1JPTExCQUNLJyk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufTtcblxuLy8gRGF0YWJhc2UgaGVhbHRoIGNoZWNrXG5jb25zdCBoZWFsdGhDaGVjayA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgY2hlY2tzID0ge1xuICAgIHBvc3RncmVzcWw6IGZhbHNlLFxuICAgIG1vbmdvZGI6IGZhbHNlXG4gIH07XG5cbiAgdHJ5IHtcbiAgICAvLyBQb3N0Z3JlU1FMIGhlYWx0aCBjaGVja1xuICAgIGNvbnN0IHBnUmVzdWx0ID0gYXdhaXQgcGdQb29sLnF1ZXJ5KCdTRUxFQ1QgTk9XKCknKTtcbiAgICBjaGVja3MucG9zdGdyZXNxbCA9ICEhcGdSZXN1bHQucm93c1swXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdQb3N0Z3JlU1FMIGhlYWx0aCBjaGVjayBmYWlsZWQ6JywgZXJyb3IpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBNb25nb0RCIGhlYWx0aCBjaGVja1xuICAgIGNvbnN0IG1vbmdvUmVzdWx0ID0gYXdhaXQgbW9uZ29vc2UuY29ubmVjdGlvbi5kYi5hZG1pbigpLnBpbmcoKTtcbiAgICBjaGVja3MubW9uZ29kYiA9IG1vbmdvUmVzdWx0Lm9rID09PSAxO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgaGVhbHRoIGNoZWNrIGZhaWxlZDonLCBlcnJvcik7XG4gIH1cblxuICByZXR1cm4gY2hlY2tzO1xufTtcblxuLy8gR3JhY2VmdWwgc2h1dGRvd25cbmNvbnN0IGNsb3NlQ29ubmVjdGlvbnMgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgcGdQb29sLmVuZCgpO1xuICAgIGNvbnNvbGUubG9nKCdQb3N0Z3JlU1FMIHBvb2wgY2xvc2VkJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xvc2luZyBQb3N0Z3JlU1FMIHBvb2w6JywgZXJyb3IpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGlvbiBjbG9zZWQnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbG9zaW5nIE1vbmdvREIgY29ubmVjdGlvbjonLCBlcnJvcik7XG4gIH1cbn07XG5cbi8vIEluaXRpYWxpemUgZGF0YWJhc2UgY29ubmVjdGlvbnNcbmNvbnN0IGluaXRpYWxpemVEYXRhYmFzZSA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBUZXN0IFBvc3RncmVTUUwgY29ubmVjdGlvblxuICAgIGF3YWl0IHBnUG9vbC5xdWVyeSgnU0VMRUNUIE5PVygpJyk7XG4gICAgY29uc29sZS5sb2coJ1Bvc3RncmVTUUwgY29ubmVjdGlvbiBzdWNjZXNzZnVsJyk7XG5cbiAgICAvLyBDb25uZWN0IHRvIE1vbmdvREJcbiAgICBhd2FpdCBjb25uZWN0TW9uZ29EQigpO1xuXG4gICAgY29uc29sZS5sb2coJ0FsbCBkYXRhYmFzZSBjb25uZWN0aW9ucyBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHknKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBpbml0aWFsaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufTtcblxuLy8gRXhwb3J0IGRhdGFiYXNlIHV0aWxpdGllc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHBnUG9vbCxcbiAgbW9uZ29vc2UsXG4gIHNlcXVlbGl6ZSxcbiAgcXVlcnksXG4gIHRyYW5zYWN0aW9uLFxuICBoZWFsdGhDaGVjayxcbiAgY2xvc2VDb25uZWN0aW9ucyxcbiAgaW5pdGlhbGl6ZURhdGFiYXNlXG59O1xuXG4vLyBJbml0aWFsaXplIGNvbm5lY3Rpb25zIHdoZW4gbW9kdWxlIGlzIGxvYWRlZFxuaW5pdGlhbGl6ZURhdGFiYXNlKCk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQUssQ0FBQyxHQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQzlCLE1BQU1DLFFB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