4c367193cf56b5d2813dc3a09e2085ed
const {
  execSync
} = require('child_process');
const fs = require('fs');
const path = require('path');
module.exports = async () => {
  console.log('ðŸ§¹ Starting global test teardown...');
  try {
    // Clean up test databases
    console.log('ðŸ—‘ï¸  Cleaning up test databases...');

    // PostgreSQL cleanup
    try {
      execSync('dropdb cex_test', {
        stdio: 'ignore'
      });
      console.log('âœ… PostgreSQL test database dropped');
    } catch (error) {
      console.log('â„¹ï¸  PostgreSQL test database cleanup skipped (might not exist)');
    }

    // MongoDB cleanup
    try {
      const {
        MongoClient
      } = require('mongodb');
      const client = new MongoClient(process.env.MONGODB_URI || 'mongodb://localhost:27017');
      await client.connect();
      await client.db('cex_test').dropDatabase();
      await client.close();
      console.log('âœ… MongoDB test database dropped');
    } catch (error) {
      console.log('â„¹ï¸  MongoDB test database cleanup skipped:', error.message);
    }

    // Redis cleanup
    try {
      const redis = require('redis');
      const client = redis.createClient({
        url: process.env.REDIS_URL || 'redis://localhost:6379/1'
      });
      await client.connect();
      await client.flushDb();
      await client.quit();
      console.log('âœ… Redis test database flushed');
    } catch (error) {
      console.log('â„¹ï¸  Redis test database cleanup skipped:', error.message);
    }

    // Clean up test files and directories
    console.log('ðŸ“ Cleaning up test files...');
    const testDirs = [path.join(__dirname, '../logs/test'), path.join(__dirname, '../uploads/test'), path.join(__dirname, '../temp/test')];
    testDirs.forEach(dir => {
      try {
        if (fs.existsSync(dir)) {
          fs.rmSync(dir, {
            recursive: true,
            force: true
          });
          console.log(`ðŸ—‘ï¸  Removed test directory: ${dir}`);
        }
      } catch (error) {
        console.log(`âš ï¸  Failed to remove directory ${dir}:`, error.message);
      }
    });

    // Clean up temporary test files
    const tempFiles = [path.join(__dirname, '../test-session.json'), path.join(__dirname, '../test-cache.json'), path.join(__dirname, '../test-locks.json')];
    tempFiles.forEach(file => {
      try {
        if (fs.existsSync(file)) {
          fs.unlinkSync(file);
          console.log(`ðŸ—‘ï¸  Removed temp file: ${file}`);
        }
      } catch (error) {
        console.log(`âš ï¸  Failed to remove file ${file}:`, error.message);
      }
    });

    // Clear global test variables
    console.log('ðŸ§¹ Clearing global test variables...');
    delete global.mockResponses;
    delete global.testDataTemplates;
    delete global.testCounters;
    delete global.testUtils;

    // Clear environment variables
    const testEnvVars = ['TEST_TIMEOUT', 'TEST_DB_SYNC', 'TEST_CLEAR_DB', 'DISABLE_EXTERNAL_APIS', 'DISABLE_EMAIL_SENDING', 'DISABLE_SMS_SENDING', 'DISABLE_BLOCKCHAIN_CALLS', 'ENABLE_TEST_ROUTES', 'ENABLE_DEBUG_LOGGING'];
    testEnvVars.forEach(envVar => {
      delete process.env[envVar];
    });

    // Generate test summary
    console.log('ðŸ“Š Generating test summary...');
    const summaryPath = path.join(__dirname, '../test-results/test-summary.json');
    const summary = {
      timestamp: new Date().toISOString(),
      environment: 'test',
      cleanup: {
        databases: 'cleaned',
        files: 'cleaned',
        globals: 'cleared',
        environment: 'reset'
      },
      status: 'completed'
    };
    try {
      fs.writeFileSync(summaryPath, JSON.stringify(summary, null, 2));
      console.log(`ðŸ“„ Test summary written to: ${summaryPath}`);
    } catch (error) {
      console.log('âš ï¸  Failed to write test summary:', error.message);
    }

    // Final cleanup verification
    console.log('ðŸ” Verifying cleanup...');
    let cleanupIssues = 0;

    // Check for remaining test processes
    try {
      const processes = execSync('tasklist /FI "IMAGENAME eq node.exe"', {
        encoding: 'utf8'
      });
      const testProcesses = processes.split('\n').filter(line => line.includes('node.exe') && line.includes('test'));
      if (testProcesses.length > 0) {
        console.log('âš ï¸  Warning: Test processes may still be running');
        cleanupIssues++;
      }
    } catch (error) {
      // Ignore process check errors on non-Windows systems
    }

    // Check for open file handles
    const openHandles = process._getActiveHandles();
    const openRequests = process._getActiveRequests();
    if (openHandles.length > 0 || openRequests.length > 0) {
      console.log(`âš ï¸  Warning: ${openHandles.length} handles and ${openRequests.length} requests still open`);
      cleanupIssues++;
    }
    if (cleanupIssues === 0) {
      console.log('âœ… All cleanup verification passed');
    } else {
      console.log(`âš ï¸  Cleanup completed with ${cleanupIssues} minor issues`);
    }
    console.log('âœ… Global test teardown completed successfully');
  } catch (error) {
    console.error('âŒ Global test teardown failed:', error);
    // Don't throw error to avoid masking test results
  }

  // Force exit to ensure clean shutdown
  setTimeout(() => {
    process.exit(0);
  }, 1000);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleGVjU3luYyIsInJlcXVpcmUiLCJmcyIsInBhdGgiLCJtb2R1bGUiLCJleHBvcnRzIiwiY29uc29sZSIsImxvZyIsInN0ZGlvIiwiZXJyb3IiLCJNb25nb0NsaWVudCIsImNsaWVudCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsImNvbm5lY3QiLCJkYiIsImRyb3BEYXRhYmFzZSIsImNsb3NlIiwibWVzc2FnZSIsInJlZGlzIiwiY3JlYXRlQ2xpZW50IiwidXJsIiwiUkVESVNfVVJMIiwiZmx1c2hEYiIsInF1aXQiLCJ0ZXN0RGlycyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJmb3JFYWNoIiwiZGlyIiwiZXhpc3RzU3luYyIsInJtU3luYyIsInJlY3Vyc2l2ZSIsImZvcmNlIiwidGVtcEZpbGVzIiwiZmlsZSIsInVubGlua1N5bmMiLCJnbG9iYWwiLCJtb2NrUmVzcG9uc2VzIiwidGVzdERhdGFUZW1wbGF0ZXMiLCJ0ZXN0Q291bnRlcnMiLCJ0ZXN0VXRpbHMiLCJ0ZXN0RW52VmFycyIsImVudlZhciIsInN1bW1hcnlQYXRoIiwic3VtbWFyeSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVudmlyb25tZW50IiwiY2xlYW51cCIsImRhdGFiYXNlcyIsImZpbGVzIiwiZ2xvYmFscyIsInN0YXR1cyIsIndyaXRlRmlsZVN5bmMiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xlYW51cElzc3VlcyIsInByb2Nlc3NlcyIsImVuY29kaW5nIiwidGVzdFByb2Nlc3NlcyIsInNwbGl0IiwiZmlsdGVyIiwibGluZSIsImluY2x1ZGVzIiwibGVuZ3RoIiwib3BlbkhhbmRsZXMiLCJfZ2V0QWN0aXZlSGFuZGxlcyIsIm9wZW5SZXF1ZXN0cyIsIl9nZXRBY3RpdmVSZXF1ZXN0cyIsInNldFRpbWVvdXQiLCJleGl0Il0sInNvdXJjZXMiOlsiZ2xvYmFsVGVhcmRvd24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBleGVjU3luYyB9ID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn6e5IFN0YXJ0aW5nIGdsb2JhbCB0ZXN0IHRlYXJkb3duLi4uJyk7XG4gIFxuICB0cnkge1xuICAgIC8vIENsZWFuIHVwIHRlc3QgZGF0YWJhc2VzXG4gICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gIENsZWFuaW5nIHVwIHRlc3QgZGF0YWJhc2VzLi4uJyk7XG4gICAgXG4gICAgLy8gUG9zdGdyZVNRTCBjbGVhbnVwXG4gICAgdHJ5IHtcbiAgICAgIGV4ZWNTeW5jKCdkcm9wZGIgY2V4X3Rlc3QnLCB7IHN0ZGlvOiAnaWdub3JlJyB9KTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgUG9zdGdyZVNRTCB0ZXN0IGRhdGFiYXNlIGRyb3BwZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ+KEue+4jyAgUG9zdGdyZVNRTCB0ZXN0IGRhdGFiYXNlIGNsZWFudXAgc2tpcHBlZCAobWlnaHQgbm90IGV4aXN0KScpO1xuICAgIH1cbiAgICBcbiAgICAvLyBNb25nb0RCIGNsZWFudXBcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBNb25nb0NsaWVudCB9ID0gcmVxdWlyZSgnbW9uZ29kYicpO1xuICAgICAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3Jyk7XG4gICAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICAgICAgYXdhaXQgY2xpZW50LmRiKCdjZXhfdGVzdCcpLmRyb3BEYXRhYmFzZSgpO1xuICAgICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIE1vbmdvREIgdGVzdCBkYXRhYmFzZSBkcm9wcGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfihLnvuI8gIE1vbmdvREIgdGVzdCBkYXRhYmFzZSBjbGVhbnVwIHNraXBwZWQ6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlZGlzIGNsZWFudXBcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVkaXMgPSByZXF1aXJlKCdyZWRpcycpO1xuICAgICAgY29uc3QgY2xpZW50ID0gcmVkaXMuY3JlYXRlQ2xpZW50KHtcbiAgICAgICAgdXJsOiBwcm9jZXNzLmVudi5SRURJU19VUkwgfHwgJ3JlZGlzOi8vbG9jYWxob3N0OjYzNzkvMSdcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGNsaWVudC5mbHVzaERiKCk7XG4gICAgICBhd2FpdCBjbGllbnQucXVpdCgpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBSZWRpcyB0ZXN0IGRhdGFiYXNlIGZsdXNoZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ+KEue+4jyAgUmVkaXMgdGVzdCBkYXRhYmFzZSBjbGVhbnVwIHNraXBwZWQ6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFuIHVwIHRlc3QgZmlsZXMgYW5kIGRpcmVjdG9yaWVzXG4gICAgY29uc29sZS5sb2coJ/Cfk4EgQ2xlYW5pbmcgdXAgdGVzdCBmaWxlcy4uLicpO1xuICAgIFxuICAgIGNvbnN0IHRlc3REaXJzID0gW1xuICAgICAgcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL2xvZ3MvdGVzdCcpLFxuICAgICAgcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL3VwbG9hZHMvdGVzdCcpLFxuICAgICAgcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL3RlbXAvdGVzdCcpXG4gICAgXTtcbiAgICBcbiAgICB0ZXN0RGlycy5mb3JFYWNoKGRpciA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhkaXIpKSB7XG4gICAgICAgICAgZnMucm1TeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPICBSZW1vdmVkIHRlc3QgZGlyZWN0b3J5OiAke2Rpcn1gKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyAgRmFpbGVkIHRvIHJlbW92ZSBkaXJlY3RvcnkgJHtkaXJ9OmAsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFuIHVwIHRlbXBvcmFyeSB0ZXN0IGZpbGVzXG4gICAgY29uc3QgdGVtcEZpbGVzID0gW1xuICAgICAgcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL3Rlc3Qtc2Vzc2lvbi5qc29uJyksXG4gICAgICBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vdGVzdC1jYWNoZS5qc29uJyksXG4gICAgICBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vdGVzdC1sb2Nrcy5qc29uJylcbiAgICBdO1xuICAgIFxuICAgIHRlbXBGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZSkpIHtcbiAgICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGUpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPICBSZW1vdmVkIHRlbXAgZmlsZTogJHtmaWxlfWApO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhg4pqg77iPICBGYWlsZWQgdG8gcmVtb3ZlIGZpbGUgJHtmaWxlfTpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBDbGVhciBnbG9iYWwgdGVzdCB2YXJpYWJsZXNcbiAgICBjb25zb2xlLmxvZygn8J+nuSBDbGVhcmluZyBnbG9iYWwgdGVzdCB2YXJpYWJsZXMuLi4nKTtcbiAgICBcbiAgICBkZWxldGUgZ2xvYmFsLm1vY2tSZXNwb25zZXM7XG4gICAgZGVsZXRlIGdsb2JhbC50ZXN0RGF0YVRlbXBsYXRlcztcbiAgICBkZWxldGUgZ2xvYmFsLnRlc3RDb3VudGVycztcbiAgICBkZWxldGUgZ2xvYmFsLnRlc3RVdGlscztcbiAgICBcbiAgICAvLyBDbGVhciBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICBjb25zdCB0ZXN0RW52VmFycyA9IFtcbiAgICAgICdURVNUX1RJTUVPVVQnLFxuICAgICAgJ1RFU1RfREJfU1lOQycsXG4gICAgICAnVEVTVF9DTEVBUl9EQicsXG4gICAgICAnRElTQUJMRV9FWFRFUk5BTF9BUElTJyxcbiAgICAgICdESVNBQkxFX0VNQUlMX1NFTkRJTkcnLFxuICAgICAgJ0RJU0FCTEVfU01TX1NFTkRJTkcnLFxuICAgICAgJ0RJU0FCTEVfQkxPQ0tDSEFJTl9DQUxMUycsXG4gICAgICAnRU5BQkxFX1RFU1RfUk9VVEVTJyxcbiAgICAgICdFTkFCTEVfREVCVUdfTE9HR0lORydcbiAgICBdO1xuICAgIFxuICAgIHRlc3RFbnZWYXJzLmZvckVhY2goZW52VmFyID0+IHtcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudltlbnZWYXJdO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEdlbmVyYXRlIHRlc3Qgc3VtbWFyeVxuICAgIGNvbnNvbGUubG9nKCfwn5OKIEdlbmVyYXRpbmcgdGVzdCBzdW1tYXJ5Li4uJyk7XG4gICAgXG4gICAgY29uc3Qgc3VtbWFyeVBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vdGVzdC1yZXN1bHRzL3Rlc3Qtc3VtbWFyeS5qc29uJyk7XG4gICAgY29uc3Qgc3VtbWFyeSA9IHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcbiAgICAgIGNsZWFudXA6IHtcbiAgICAgICAgZGF0YWJhc2VzOiAnY2xlYW5lZCcsXG4gICAgICAgIGZpbGVzOiAnY2xlYW5lZCcsXG4gICAgICAgIGdsb2JhbHM6ICdjbGVhcmVkJyxcbiAgICAgICAgZW52aXJvbm1lbnQ6ICdyZXNldCdcbiAgICAgIH0sXG4gICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnXG4gICAgfTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhzdW1tYXJ5UGF0aCwgSlNPTi5zdHJpbmdpZnkoc3VtbWFyeSwgbnVsbCwgMikpO1xuICAgICAgY29uc29sZS5sb2coYPCfk4QgVGVzdCBzdW1tYXJ5IHdyaXR0ZW4gdG86ICR7c3VtbWFyeVBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gIEZhaWxlZCB0byB3cml0ZSB0ZXN0IHN1bW1hcnk6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZpbmFsIGNsZWFudXAgdmVyaWZpY2F0aW9uXG4gICAgY29uc29sZS5sb2coJ/CflI0gVmVyaWZ5aW5nIGNsZWFudXAuLi4nKTtcbiAgICBcbiAgICBsZXQgY2xlYW51cElzc3VlcyA9IDA7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHJlbWFpbmluZyB0ZXN0IHByb2Nlc3Nlc1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm9jZXNzZXMgPSBleGVjU3luYygndGFza2xpc3QgL0ZJIFwiSU1BR0VOQU1FIGVxIG5vZGUuZXhlXCInLCB7IGVuY29kaW5nOiAndXRmOCcgfSk7XG4gICAgICBjb25zdCB0ZXN0UHJvY2Vzc2VzID0gcHJvY2Vzc2VzLnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBcbiAgICAgICAgbGluZS5pbmNsdWRlcygnbm9kZS5leGUnKSAmJiBsaW5lLmluY2x1ZGVzKCd0ZXN0JylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmICh0ZXN0UHJvY2Vzc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyAgV2FybmluZzogVGVzdCBwcm9jZXNzZXMgbWF5IHN0aWxsIGJlIHJ1bm5pbmcnKTtcbiAgICAgICAgY2xlYW51cElzc3VlcysrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBJZ25vcmUgcHJvY2VzcyBjaGVjayBlcnJvcnMgb24gbm9uLVdpbmRvd3Mgc3lzdGVtc1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3Igb3BlbiBmaWxlIGhhbmRsZXNcbiAgICBjb25zdCBvcGVuSGFuZGxlcyA9IHByb2Nlc3MuX2dldEFjdGl2ZUhhbmRsZXMoKTtcbiAgICBjb25zdCBvcGVuUmVxdWVzdHMgPSBwcm9jZXNzLl9nZXRBY3RpdmVSZXF1ZXN0cygpO1xuICAgIFxuICAgIGlmIChvcGVuSGFuZGxlcy5sZW5ndGggPiAwIHx8IG9wZW5SZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhg4pqg77iPICBXYXJuaW5nOiAke29wZW5IYW5kbGVzLmxlbmd0aH0gaGFuZGxlcyBhbmQgJHtvcGVuUmVxdWVzdHMubGVuZ3RofSByZXF1ZXN0cyBzdGlsbCBvcGVuYCk7XG4gICAgICBjbGVhbnVwSXNzdWVzKys7XG4gICAgfVxuICAgIFxuICAgIGlmIChjbGVhbnVwSXNzdWVzID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIEFsbCBjbGVhbnVwIHZlcmlmaWNhdGlvbiBwYXNzZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYOKaoO+4jyAgQ2xlYW51cCBjb21wbGV0ZWQgd2l0aCAke2NsZWFudXBJc3N1ZXN9IG1pbm9yIGlzc3Vlc2ApO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn4pyFIEdsb2JhbCB0ZXN0IHRlYXJkb3duIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgR2xvYmFsIHRlc3QgdGVhcmRvd24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAvLyBEb24ndCB0aHJvdyBlcnJvciB0byBhdm9pZCBtYXNraW5nIHRlc3QgcmVzdWx0c1xuICB9XG4gIFxuICAvLyBGb3JjZSBleGl0IHRvIGVuc3VyZSBjbGVhbiBzaHV0ZG93blxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBwcm9jZXNzLmV4aXQoMCk7XG4gIH0sIDEwMDApO1xufTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBUyxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDN0MsTUFBTUMsRUFBRSxHQUFHRCxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUU1QkcsTUFBTSxDQUFDQyxPQUFPLEdBQUcsWUFBWTtFQUMzQkMsT0FBTyxDQUFDQyxHQUFHLENBQUMscUNBQXFDLENBQUM7RUFFbEQsSUFBSTtJQUNGO0lBQ0FELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG9DQUFvQyxDQUFDOztJQUVqRDtJQUNBLElBQUk7TUFDRlAsUUFBUSxDQUFDLGlCQUFpQixFQUFFO1FBQUVRLEtBQUssRUFBRTtNQUFTLENBQUMsQ0FBQztNQUNoREYsT0FBTyxDQUFDQyxHQUFHLENBQUMsb0NBQW9DLENBQUM7SUFDbkQsQ0FBQyxDQUFDLE9BQU9FLEtBQUssRUFBRTtNQUNkSCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnRUFBZ0UsQ0FBQztJQUMvRTs7SUFFQTtJQUNBLElBQUk7TUFDRixNQUFNO1FBQUVHO01BQVksQ0FBQyxHQUFHVCxPQUFPLENBQUMsU0FBUyxDQUFDO01BQzFDLE1BQU1VLE1BQU0sR0FBRyxJQUFJRCxXQUFXLENBQUNFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXLElBQUksMkJBQTJCLENBQUM7TUFDdEYsTUFBTUgsTUFBTSxDQUFDSSxPQUFPLENBQUMsQ0FBQztNQUN0QixNQUFNSixNQUFNLENBQUNLLEVB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