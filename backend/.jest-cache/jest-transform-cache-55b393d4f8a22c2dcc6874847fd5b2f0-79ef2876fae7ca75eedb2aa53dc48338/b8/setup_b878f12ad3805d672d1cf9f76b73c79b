5d72c6d954810968695f44ee714684d9
// Mock database modules for testing

// Mock external services
_getJestObj().mock('../src/models', () => ({
  sequelize: {
    authenticate: jest.fn().mockResolvedValue(true),
    sync: jest.fn().mockResolvedValue(true),
    close: jest.fn().mockResolvedValue(true),
    truncate: jest.fn().mockResolvedValue(true)
  },
  User: {
    findOne: jest.fn(),
    create: jest.fn(),
    findAll: jest.fn()
  },
  TradingPair: {
    findOne: jest.fn(),
    create: jest.fn(),
    findAll: jest.fn()
  },
  Order: {
    findOne: jest.fn(),
    create: jest.fn(),
    findAll: jest.fn()
  },
  Balance: {
    findOne: jest.fn(),
    create: jest.fn(),
    findAll: jest.fn()
  }
}));
_getJestObj().mock('../src/config/redis', () => ({
  flushdb: jest.fn().mockResolvedValue('OK'),
  quit: jest.fn().mockResolvedValue('OK'),
  get: jest.fn().mockResolvedValue(null),
  set: jest.fn().mockResolvedValue('OK'),
  del: jest.fn().mockResolvedValue(1)
}));
_getJestObj().mock('mongoose', () => ({
  connect: jest.fn().mockResolvedValue(true),
  connection: {
    readyState: 1,
    close: jest.fn().mockResolvedValue(true)
  }
}));
_getJestObj().mock('../src/services/emailService', () => ({
  sendEmail: jest.fn().mockResolvedValue(true),
  sendVerificationEmail: jest.fn().mockResolvedValue(true),
  sendPasswordResetEmail: jest.fn().mockResolvedValue(true)
}));
_getJestObj().mock('../src/services/smsService', () => ({
  sendSMS: jest.fn().mockResolvedValue(true),
  sendVerificationSMS: jest.fn().mockResolvedValue(true)
}));
// Mock external services
_getJestObj().mock('../src/services/emailService', () => ({
  sendEmail: jest.fn().mockResolvedValue(true),
  sendVerificationEmail: jest.fn().mockResolvedValue(true),
  sendPasswordResetEmail: jest.fn().mockResolvedValue(true)
}));
_getJestObj().mock('../src/services/smsService', () => ({
  sendSMS: jest.fn().mockResolvedValue(true),
  sendVerificationSMS: jest.fn().mockResolvedValue(true)
}));

// Increase timeout for integration tests
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const {
  sequelize
} = require('../src/models');
const redis = require('../src/config/redis');
const mongoose = require('mongoose');

// Setup test environment
process.env.NODE_ENV = 'test';
process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';
process.env.ENCRYPTION_KEY = 'test-encryption-key-32-chars-long';
process.env.REDIS_URL = 'redis://localhost:6379/1'; // Use different DB for tests
process.env.POSTGRES_DB = 'cex_test';
process.env.MONGODB_URI = 'mongodb://localhost:27017/cex_test';

// Global test setup
beforeAll(async () => {
  // Wait for database connections
  await sequelize.authenticate();
  console.log('PostgreSQL connected for testing');

  // Sync database (create tables)
  await sequelize.sync({
    force: true
  });
  console.log('Test database synced');

  // Connect to MongoDB
  if (mongoose.connection.readyState === 0) {
    await mongoose.connect(process.env.MONGODB_URI);
    console.log('MongoDB connected for testing');
  }

  // Clear Redis test database
  await redis.flushdb();
  console.log('Redis test database cleared');
});

// Global test teardown
afterAll(async () => {
  // Close database connections
  await sequelize.close();
  await mongoose.connection.close();
  await redis.quit();
  console.log('Test databases disconnected');
});

// Clear data between tests
beforeEach(async () => {
  // Clear Redis cache
  await redis.flushdb();

  // Truncate all PostgreSQL tables
  await sequelize.truncate({
    cascade: true,
    restartIdentity: true
  });
});

// Test utilities
global.testUtils = {
  // Create test user
  createTestUser: async (userData = {}) => {
    const User = require('../src/models/User');
    const defaultUser = {
      username: 'testuser',
      email: 'test@example.com',
      password: 'TestPassword123!',
      firstName: 'Test',
      lastName: 'User',
      emailVerified: true,
      kycLevel: 1,
      status: 'active'
    };
    return await User.create({
      ...defaultUser,
      ...userData
    });
  },
  // Create test trading pair
  createTestTradingPair: async (pairData = {}) => {
    const TradingPair = require('../src/models/TradingPair');
    const defaultPair = {
      symbol: 'BTC/USDT',
      base_currency: 'BTC',
      quote_currency: 'USDT',
      status: 'active',
      min_order_size: '0.001',
      max_order_size: '1000',
      tick_size: '0.01',
      lot_size: '0.001',
      maker_fee: '0.001',
      taker_fee: '0.002'
    };
    return await TradingPair.create({
      ...defaultPair,
      ...pairData
    });
  },
  // Create test balance
  createTestBalance: async (userId, currency = 'USDT', amount = '10000') => {
    const Balance = require('../src/models/Balance');
    return await Balance.create({
      user_id: userId,
      currency,
      available_balance: amount,
      locked_balance: '0',
      total_balance: amount
    });
  },
  // Generate JWT token for testing
  generateTestToken: userId => {
    const jwt = require('jsonwebtoken');
    return jwt.sign({
      userId,
      type: 'access'
    }, process.env.JWT_SECRET, {
      expiresIn: '1h'
    });
  }
};
jest.setTimeout(30000);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJzZXF1ZWxpemUiLCJhdXRoZW50aWNhdGUiLCJqZXN0IiwiZm4iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInN5bmMiLCJjbG9zZSIsInRydW5jYXRlIiwiVXNlciIsImZpbmRPbmUiLCJjcmVhdGUiLCJmaW5kQWxsIiwiVHJhZGluZ1BhaXIiLCJPcmRlciIsIkJhbGFuY2UiLCJmbHVzaGRiIiwicXVpdCIsImdldCIsInNldCIsImRlbCIsImNvbm5lY3QiLCJjb25uZWN0aW9uIiwicmVhZHlTdGF0ZSIsInNlbmRFbWFpbCIsInNlbmRWZXJpZmljYXRpb25FbWFpbCIsInNlbmRQYXNzd29yZFJlc2V0RW1haWwiLCJzZW5kU01TIiwic2VuZFZlcmlmaWNhdGlvblNNUyIsInJlcXVpcmUiLCJyZWRpcyIsIm1vbmdvb3NlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiSldUX1NFQ1JFVCIsIkVOQ1JZUFRJT05fS0VZIiwiUkVESVNfVVJMIiwiUE9TVEdSRVNfREIiLCJNT05HT0RCX1VSSSIsImJlZm9yZUFsbCIsImNvbnNvbGUiLCJsb2ciLCJmb3JjZSIsImFmdGVyQWxsIiwiYmVmb3JlRWFjaCIsImNhc2NhZGUiLCJyZXN0YXJ0SWRlbnRpdHkiLCJnbG9iYWwiLCJ0ZXN0VXRpbHMiLCJjcmVhdGVUZXN0VXNlciIsInVzZXJEYXRhIiwiZGVmYXVsdFVzZXIiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsVmVyaWZpZWQiLCJreWNMZXZlbCIsInN0YXR1cyIsImNyZWF0ZVRlc3RUcmFkaW5nUGFpciIsInBhaXJEYXRhIiwiZGVmYXVsdFBhaXIiLCJzeW1ib2wiLCJiYXNlX2N1cnJlbmN5IiwicXVvdGVfY3VycmVuY3kiLCJtaW5fb3JkZXJfc2l6ZSIsIm1heF9vcmRlcl9zaXplIiwidGlja19zaXplIiwibG90X3NpemUiLCJtYWtlcl9mZWUiLCJ0YWtlcl9mZWUiLCJjcmVhdGVUZXN0QmFsYW5jZSIsInVzZXJJZCIsImN1cnJlbmN5IiwiYW1vdW50IiwidXNlcl9pZCIsImF2YWlsYWJsZV9iYWxhbmNlIiwibG9ja2VkX2JhbGFuY2UiLCJ0b3RhbF9iYWxhbmNlIiwiZ2VuZXJhdGVUZXN0VG9rZW4iLCJqd3QiLCJzaWduIiwidHlwZSIsImV4cGlyZXNJbiIsInNldFRpbWVvdXQiXSwic291cmNlcyI6WyJzZXR1cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNb2NrIGRhdGFiYXNlIG1vZHVsZXMgZm9yIHRlc3Rpbmdcbmplc3QubW9jaygnLi4vc3JjL21vZGVscycsICgpID0+ICh7XG4gIHNlcXVlbGl6ZToge1xuICAgIGF1dGhlbnRpY2F0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICAgIHN5bmM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbiAgICBjbG9zZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICAgIHRydW5jYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSlcbiAgfSxcbiAgVXNlcjoge1xuICAgIGZpbmRPbmU6IGplc3QuZm4oKSxcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICBmaW5kQWxsOiBqZXN0LmZuKClcbiAgfSxcbiAgVHJhZGluZ1BhaXI6IHtcbiAgICBmaW5kT25lOiBqZXN0LmZuKCksXG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgZmluZEFsbDogamVzdC5mbigpXG4gIH0sXG4gIE9yZGVyOiB7XG4gICAgZmluZE9uZTogamVzdC5mbigpLFxuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGZpbmRBbGw6IGplc3QuZm4oKVxuICB9LFxuICBCYWxhbmNlOiB7XG4gICAgZmluZE9uZTogamVzdC5mbigpLFxuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGZpbmRBbGw6IGplc3QuZm4oKVxuICB9XG59KSk7XG5cbmplc3QubW9jaygnLi4vc3JjL2NvbmZpZy9yZWRpcycsICgpID0+ICh7XG4gIGZsdXNoZGI6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnT0snKSxcbiAgcXVpdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCdPSycpLFxuICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKSxcbiAgc2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJ09LJyksXG4gIGRlbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDEpXG59KSk7XG5cbmplc3QubW9jaygnbW9uZ29vc2UnLCAoKSA9PiAoe1xuICBjb25uZWN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gIGNvbm5lY3Rpb246IHtcbiAgICByZWFkeVN0YXRlOiAxLFxuICAgIGNsb3NlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSlcbiAgfVxufSkpO1xuXG4vLyBNb2NrIGV4dGVybmFsIHNlcnZpY2VzXG5qZXN0Lm1vY2soJy4uL3NyYy9zZXJ2aWNlcy9lbWFpbFNlcnZpY2UnLCAoKSA9PiAoe1xuICBzZW5kRW1haWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbiAgc2VuZFZlcmlmaWNhdGlvbkVtYWlsOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gIHNlbmRQYXNzd29yZFJlc2V0RW1haWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKVxufSkpO1xuXG5qZXN0Lm1vY2soJy4uL3NyYy9zZXJ2aWNlcy9zbXNTZXJ2aWNlJywgKCkgPT4gKHtcbiAgc2VuZFNNUzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICBzZW5kVmVyaWZpY2F0aW9uU01TOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSlcbn0pKTtcblxuY29uc3QgeyBzZXF1ZWxpemUgfSA9IHJlcXVpcmUoJy4uL3NyYy9tb2RlbHMnKTtcbmNvbnN0IHJlZGlzID0gcmVxdWlyZSgnLi4vc3JjL2NvbmZpZy9yZWRpcycpO1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG4vLyBTZXR1cCB0ZXN0IGVudmlyb25tZW50XG5wcm9jZXNzLmVudi5OT0RFX0VOViA9ICd0ZXN0JztcbnByb2Nlc3MuZW52LkpXVF9TRUNSRVQgPSAndGVzdC1qd3Qtc2VjcmV0LWtleS1mb3ItdGVzdGluZy1vbmx5JztcbnByb2Nlc3MuZW52LkVOQ1JZUFRJT05fS0VZID0gJ3Rlc3QtZW5jcnlwdGlvbi1rZXktMzItY2hhcnMtbG9uZyc7XG5wcm9jZXNzLmVudi5SRURJU19VUkwgPSAncmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OS8xJzsgLy8gVXNlIGRpZmZlcmVudCBEQiBmb3IgdGVzdHNcbnByb2Nlc3MuZW52LlBPU1RHUkVTX0RCID0gJ2NleF90ZXN0JztcbnByb2Nlc3MuZW52Lk1PTkdPREJfVVJJID0gJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvY2V4X3Rlc3QnO1xuXG4vLyBHbG9iYWwgdGVzdCBzZXR1cFxuYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgLy8gV2FpdCBmb3IgZGF0YWJhc2UgY29ubmVjdGlvbnNcbiAgYXdhaXQgc2VxdWVsaXplLmF1dGhlbnRpY2F0ZSgpO1xuICBjb25zb2xlLmxvZygnUG9zdGdyZVNRTCBjb25uZWN0ZWQgZm9yIHRlc3RpbmcnKTtcbiAgXG4gIC8vIFN5bmMgZGF0YWJhc2UgKGNyZWF0ZSB0YWJsZXMpXG4gIGF3YWl0IHNlcXVlbGl6ZS5zeW5jKHsgZm9yY2U6IHRydWUgfSk7XG4gIGNvbnNvbGUubG9nKCdUZXN0IGRhdGFiYXNlIHN5bmNlZCcpO1xuICBcbiAgLy8gQ29ubmVjdCB0byBNb25nb0RCXG4gIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgPT09IDApIHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKTtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0ZWQgZm9yIHRlc3RpbmcnKTtcbiAgfVxuICBcbiAgLy8gQ2xlYXIgUmVkaXMgdGVzdCBkYXRhYmFzZVxuICBhd2FpdCByZWRpcy5mbHVzaGRiKCk7XG4gIGNvbnNvbGUubG9nKCdSZWRpcyB0ZXN0IGRhdGFiYXNlIGNsZWFyZWQnKTtcbn0pO1xuXG4vLyBHbG9iYWwgdGVzdCB0ZWFyZG93blxuYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAvLyBDbG9zZSBkYXRhYmFzZSBjb25uZWN0aW9uc1xuICBhd2FpdCBzZXF1ZWxpemUuY2xvc2UoKTtcbiAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdGlvbi5jbG9zZSgpO1xuICBhd2FpdCByZWRpcy5xdWl0KCk7XG4gIGNvbnNvbGUubG9nKCdUZXN0IGRhdGFiYXNlcyBkaXNjb25uZWN0ZWQnKTtcbn0pO1xuXG4vLyBDbGVhciBkYXRhIGJldHdlZW4gdGVzdHNcbmJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAvLyBDbGVhciBSZWRpcyBjYWNoZVxuICBhd2FpdCByZWRpcy5mbHVzaGRiKCk7XG4gIFxuICAvLyBUcnVuY2F0ZSBhbGwgUG9zdGdyZVNRTCB0YWJsZXNcbiAgYXdhaXQgc2VxdWVsaXplLnRydW5jYXRlKHsgY2FzY2FkZTogdHJ1ZSwgcmVzdGFydElkZW50aXR5OiB0cnVlIH0pO1xufSk7XG5cbi8vIFRlc3QgdXRpbGl0aWVzXG5nbG9iYWwudGVzdFV0aWxzID0ge1xuICAvLyBDcmVhdGUgdGVzdCB1c2VyXG4gIGNyZWF0ZVRlc3RVc2VyOiBhc3luYyAodXNlckRhdGEgPSB7fSkgPT4ge1xuICAgIGNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9zcmMvbW9kZWxzL1VzZXInKTtcbiAgICBjb25zdCBkZWZhdWx0VXNlciA9IHtcbiAgICAgIHVzZXJuYW1lOiAndGVzdHVzZXInLFxuICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnVGVzdFBhc3N3b3JkMTIzIScsXG4gICAgICBmaXJzdE5hbWU6ICdUZXN0JyxcbiAgICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgICBlbWFpbFZlcmlmaWVkOiB0cnVlLFxuICAgICAga3ljTGV2ZWw6IDEsXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnXG4gICAgfTtcbiAgICByZXR1cm4gYXdhaXQgVXNlci5jcmVhdGUoeyAuLi5kZWZhdWx0VXNlciwgLi4udXNlckRhdGEgfSk7XG4gIH0sXG4gIFxuICAvLyBDcmVhdGUgdGVzdCB0cmFkaW5nIHBhaXJcbiAgY3JlYXRlVGVzdFRyYWRpbmdQYWlyOiBhc3luYyAocGFpckRhdGEgPSB7fSkgPT4ge1xuICAgIGNvbnN0IFRyYWRpbmdQYWlyID0gcmVxdWlyZSgnLi4vc3JjL21vZGVscy9UcmFkaW5nUGFpcicpO1xuICAgIGNvbnN0IGRlZmF1bHRQYWlyID0ge1xuICAgICAgc3ltYm9sOiAnQlRDL1VTRFQnLFxuICAgICAgYmFzZV9jdXJyZW5jeTogJ0JUQycsXG4gICAgICBxdW90ZV9jdXJyZW5jeTogJ1VTRFQnLFxuICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgIG1pbl9vcmRlcl9zaXplOiAnMC4wMDEnLFxuICAgICAgbWF4X29yZGVyX3NpemU6ICcxMDAwJyxcbiAgICAgIHRpY2tfc2l6ZTogJzAuMDEnLFxuICAgICAgbG90X3NpemU6ICcwLjAwMScsXG4gICAgICBtYWtlcl9mZWU6ICcwLjAwMScsXG4gICAgICB0YWtlcl9mZWU6ICcwLjAwMidcbiAgICB9O1xuICAgIHJldHVybiBhd2FpdCBUcmFkaW5nUGFpci5jcmVhdGUoeyAuLi5kZWZhdWx0UGFpciwgLi4ucGFpckRhdGEgfSk7XG4gIH0sXG4gIFxuICAvLyBDcmVhdGUgdGVzdCBiYWxhbmNlXG4gIGNyZWF0ZVRlc3RCYWxhbmNlOiBhc3luYyAodXNlcklkLCBjdXJyZW5jeSA9ICdVU0RUJywgYW1vdW50ID0gJzEwMDAwJykgPT4ge1xuICAgIGNvbnN0IEJhbGFuY2UgPSByZXF1aXJlKCcuLi9zcmMvbW9kZWxzL0JhbGFuY2UnKTtcbiAgICByZXR1cm4gYXdhaXQgQmFsYW5jZS5jcmVhdGUoe1xuICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgY3VycmVuY3ksXG4gICAgICBhdmFpbGFibGVfYmFsYW5jZTogYW1vdW50LFxuICAgICAgbG9ja2VkX2JhbGFuY2U6ICcwJyxcbiAgICAgIHRvdGFsX2JhbGFuY2U6IGFtb3VudFxuICAgIH0pO1xuICB9LFxuICBcbiAgLy8gR2VuZXJhdGUgSldUIHRva2VuIGZvciB0ZXN0aW5nXG4gIGdlbmVyYXRlVGVzdFRva2VuOiAodXNlcklkKSA9PiB7XG4gICAgY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG4gICAgcmV0dXJuIGp3dC5zaWduKFxuICAgICAgeyB1c2VySWQsIHR5cGU6ICdhY2Nlc3MnIH0sXG4gICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxuICAgICAgeyBleHBpcmVzSW46ICcxaCcgfVxuICAgICk7XG4gIH1cbn07XG5cbi8vIE1vY2sgZXh0ZXJuYWwgc2VydmljZXNcbmplc3QubW9jaygnLi4vc3JjL3NlcnZpY2VzL2VtYWlsU2VydmljZScsICgpID0+ICh7XG4gIHNlbmRFbWFpbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICBzZW5kVmVyaWZpY2F0aW9uRW1haWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKSxcbiAgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXG59KSk7XG5cbmplc3QubW9jaygnLi4vc3JjL3NlcnZpY2VzL3Ntc1NlcnZpY2UnLCAoKSA9PiAoe1xuICBzZW5kU01TOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gIHNlbmRWZXJpZmljYXRpb25TTVM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKVxufSkpO1xuXG4vLyBJbmNyZWFzZSB0aW1lb3V0IGZvciBpbnRlZ3JhdGlvbiB0ZXN0c1xuamVzdC5zZXRUaW1lb3V0KDMwMDAwKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQThDQTtBQTdDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsZUFBZSxFQUFFLE9BQU87RUFDaENDLFNBQVMsRUFBRTtJQUNUQyxZQUFZLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQy9DQyxJQUFJLEVBQUVILElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQ3ZDRSxLQUFLLEVBQUVKLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQ3hDRyxRQUFRLEVBQUVMLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSTtFQUM1QyxDQUFDO0VBQ0RJLElBQUksRUFBRTtJQUNKQyxPQUFPLEVBQUVQLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbEJPLE1BQU0sRUFBRVIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNqQlEsT0FBTyxFQUFFVCxJQUFJLENBQUNDLEVBQUUsQ0FBQztFQUNuQixDQUFDO0VBQ0RTLFdBQVcsRUFBRTtJQUNYSCxPQUFPLEVBQUVQLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbEJPLE1BQU0sRUFBRVIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNqQlEsT0FBTyxFQUFFVCxJQUFJLENBQUNDLEVBQUUsQ0FBQztFQUNuQixDQUFDO0VBQ0RVLEtBQUssRUFBRTtJQUNMSixPQUFPLEVBQUVQLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbEJPLE1BQU0sRUFBRVIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNqQlEsT0FBTyxFQUFFVCxJQUFJLENBQUNDLEVBQUUsQ0FBQztFQUNuQixDQUFDO0VBQ0RXLE9BQU8sRUFBRTtJQUNQTCxPQUFPLEVBQUVQLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbEJPLE1BQU0sRUFBRVIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNqQlEsT0FBTyxFQUFFVCxJQUFJLENBQUNDLEVBQUUsQ0FBQztFQUNuQjtBQUNGLENBQUMsQ0FBQyxDQUFDO0FBRUhMLFdBQUEsR0FBS0MsSUFBSSxDQUFDLHFCQUFxQixFQUFFLE9BQU87RUFDdENnQixPQUFPLEVBQUViLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0VBQzFDWSxJQUFJLEVBQUVkLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0VBQ3ZDYSxHQUFHLEVBQUVmLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0VBQ3RDYyxHQUFHLEVBQUVoQixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLElBQUksQ0FBQztFQUN0Q2UsR0FBRyxFQUFFakIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3BDLENBQUMsQ0FBQyxDQUFDO0FBRUhOLFdBQUEsR0FBS0MsSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPO0VBQzNCcUIsT0FBTyxFQUFFbEIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7RUFDMUNpQixVQUFVLEVBQUU7SUFDVkMsVUFBVSxFQUFFLENBQUM7SUFDYmhCLEtBQUssRUFBRUosSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJO0VBQ3pDO0FBQ0YsQ0FBQyxDQUFDLENBQUM7QUFHSE4sV0FBQSxHQUFLQyxJQUFJLENBQUMsOEJBQThCLEVBQUUsT0FBTztFQUMvQ3dCLFNBQVMsRUFBRXJCLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0VBQzVDb0IscUJBQXFCLEVBQUV0QixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLElBQUksQ0FBQztFQUN4RHFCLHNCQUFzQixFQUFFdkIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJO0FBQzFELENBQUMsQ0FBQyxDQUFDO0FBRUhOLFdBQUEsR0FBS0MsSUFBSSxDQUFDLDRCQUE0QixFQUFFLE9BQU87RUFDN0MyQixPQUFPLEVBQUV4QixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLElBQUksQ0FBQztFQUMxQ3VCLG1CQUFtQixFQUFFekIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJO0FBQ3ZELENBQUMsQ0FBQyxDQUFDO0FBZ0hIO0FBQ0FOLFdBQUEsR0FBS0MsSUFBSSxDQUFDLDhCQUE4QixFQUFFLE9BQU87RUFDL0N3QixTQUFTLEVBQUVyQixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLElBQUksQ0FBQztFQUM1Q29CLHFCQUFxQixFQUFFdEIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7RUFDeERxQixzQkFBc0IsRUFBRXZCLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSTtBQUMxRCxDQUFDLENBQUMsQ0FBQztBQUVITixXQUFBLEdBQUtDLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxPQUFPO0VBQzdDMkIsT0FBTyxFQUFFeEIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7RUFDMUN1QixtQkFBbUIsRUFBRXpCLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsSUFBSTtBQUN2RCxDQUFDLENBQUMsQ0FBQzs7QUFFSDtBQUFBLFNBQUFOLFlBQUE7RUFBQTtJQUFBSTtFQUFBLElBQUEwQixPQUFBO0VBQUE5QixXQUFBLEdBQUFBLENBQUEsS0FBQUksSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQTFIQSxNQUFNO0VBQUVGO0FBQVUsQ0FBQyxHQUFHNEIsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUM5QyxNQUFNQyxLQUFLLEdBQUdELE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUM1QyxNQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxVQUFVLENBQUM7O0FBRXBDO0FBQ0FHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEdBQUcsTUFBTTtBQUM3QkYsT0FBTyxDQUFDQyxHQUFHLENBQUNFLFVBQVUsR0FBRyxzQ0FBc0M7QUFDL0RILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxjQUFjLEdBQUcsbUNBQW1DO0FBQ2hFSixPQUFPLENBQUNDLEdBQUcsQ0FBQ0ksU0FBUyxHQUFHLDBCQUEwQixDQUFDLENBQUM7QUFDcERMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSyxXQUFXLEdBQUcsVUFBVTtBQUNwQ04sT0FBTyxDQUFDQyxHQUFHLENBQUNNLFdBQVcsR0FBRyxvQ0FBb0M7O0FBRTlEO0FBQ0FDLFNBQVMsQ0FBQyxZQUFZO0VBQ3BCO0VBQ0EsTUFBTXZDLFNBQVMsQ0FBQ0MsWUFBWSxDQUFDLENBQUM7RUFDOUJ1QyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQzs7RUFFL0M7RUFDQSxNQUFNekMsU0FBUyxDQUFDSyxJQUFJLENBQUM7SUFBRXFDLEtBQUssRUFBRTtFQUFLLENBQUMsQ0FBQztFQUNyQ0YsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0JBQXNCLENBQUM7O0VBRW5DO0VBQ0EsSUFBSVgsUUFBUSxDQUFDVCxVQUFVLENBQUNDLFVBQVUsS0FBSyxDQUFDLEVBQUU7SUFDeEMsTUFBTVEsUUFBUSxDQUFDVixPQUFPLENBQUNXLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTSxXQUFXLENBQUM7SUFDL0NFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtCQUErQixDQUFDO0VBQzlDOztFQUVBO0VBQ0EsTUFBTVosS0FBSyxDQUFDZCxPQUFPLENBQUMsQ0FBQztFQUNyQnlCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZCQUE2QixDQUFDO0FBQzVDLENBQUMsQ0FBQzs7QUFFRjtBQUNBRSxRQUFRLENBQUMsWUFBWTtFQUNuQjtFQUNBLE1BQU0zQyxTQUFTLENBQUNNLEtBQUssQ0FBQyxDQUFDO0VBQ3ZCLE1BQU13QixRQUFRLENBQUNULFVBQVUsQ0FBQ2YsS0FBSyxDQUFDLENBQUM7RUFDakMsTUFBTXVCLEtBQUssQ0FBQ2IsSUFBSSxDQUFDLENBQUM7RUFDbEJ3QixPQUFPLENBQUNDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQztBQUM1QyxDQUFDLENBQUM7O0FBRUY7QUFDQUcsVUFBVSxDQUFDLFlBQVk7RUFDckI7RUFDQSxNQUFNZixLQUFLLENBQUNkLE9BQU8sQ0FBQyxDQUFDOztFQUVyQjtFQUNBLE1BQU1mLFNBQVMsQ0FBQ08sUUFBUSxDQUFDO0lBQUVzQyxPQUFPLEVBQUUsSUFBSTtJQUFFQyxlQUFlLEVBQUU7RUFBSyxDQUFDLENBQUM7QUFDcEUsQ0FBQyxDQUFDOztBQUVGO0FBQ0FDLE1BQU0sQ0FBQ0MsU0FBUyxHQUFHO0VBQ2pCO0VBQ0FDLGNBQWMsRUFBRSxNQUFBQSxDQUFPQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEtBQUs7SUFDdkMsTUFBTTFDLElBQUksR0FBR29CLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztJQUMxQyxNQUFNdUIsV0FBVyxHQUFHO01BQ2xCQyxRQUFRLEVBQUUsVUFBVTtNQUNwQkMsS0FBSyxFQUFFLGtCQUFrQjtNQUN6QkMsUUFBUSxFQUFFLGtCQUFrQjtNQUM1QkMsU0FBUyxFQUFFLE1BQU07TUFDakJDLFFBQVEsRUFBRSxNQUFNO01BQ2hCQyxhQUFhLEVBQUUsSUFBSTtNQUNuQkMsUUFBUSxFQUFFLENBQUM7TUFDWEMsTUFBTSxFQUFFO0lBQ1YsQ0FBQztJQUNELE9BQU8sTUFBTW5ELElBQUksQ0FBQ0UsTUFBTSxDQUFDO01BQUUsR0FBR3lDLFdBQVc7TUFBRSxHQUFHRDtJQUFTLENBQUMsQ0FBQztFQUMzRCxDQUFDO0VBRUQ7RUFDQVUscUJBQXFCLEVBQUUsTUFBQUEsQ0FBT0MsUUFBUSxHQUFHLENBQUMsQ0FBQyxLQUFLO0lBQzlDLE1BQU1qRCxXQUFXLEdBQUdnQixPQUFPLENBQUMsMkJBQTJCLENBQUM7SUFDeEQsTUFBTWtDLFdBQVcsR0FBRztNQUNsQkMsTUFBTSxFQUFFLFVBQVU7TUFDbEJDLGFBQWEsRUFBRSxLQUFLO01BQ3BCQyxjQUFjLEVBQUUsTUFBTTtNQUN0Qk4sTUFBTSxFQUFFLFFBQVE7TUFDaEJPLGNBQWMsRUFBRSxPQUFPO01BQ3ZCQyxjQUFjLEVBQUUsTUFBTTtNQUN0QkMsU0FBUyxFQUFFLE1BQU07TUFDakJDLFFBQVEsRUFBRSxPQUFPO01BQ2pCQyxTQUFTLEVBQUUsT0FBTztNQUNsQkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQztJQUNELE9BQU8sTUFBTTNELFdBQVcsQ0FBQ0YsTUFBTSxDQUFDO01BQUUsR0FBR29ELFdBQVc7TUFBRSxHQUFHRDtJQUFTLENBQUMsQ0FBQztFQUNsRSxDQUFDO0VBRUQ7RUFDQVcsaUJBQWlCLEVBQUUsTUFBQUEsQ0FBT0MsTUFBTSxFQUFFQyxRQUFRLEdBQUcsTUFBTSxFQUFFQyxNQUFNLEdBQUcsT0FBTyxLQUFLO0lBQ3hFLE1BQU03RCxPQUFPLEdBQUdjLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztJQUNoRCxPQUFPLE1BQU1kLE9BQU8sQ0FBQ0osTUFBTSxDQUFDO01BQzFCa0UsT0FBTyxFQUFFSCxNQUFNO01BQ2ZDLFFBQVE7TUFDUkcsaUJBQWlCLEVBQUVGLE1BQU07TUFDekJHLGNBQWMsRUFBRSxHQUFHO01BQ25CQyxhQUFhLEVBQUVKO0lBQ2pCLENBQUMsQ0FBQztFQUNKLENBQUM7RUFFRDtFQUNBSyxpQkFBaUIsRUFBR1AsTUFBTSxJQUFLO0lBQzdCLE1BQU1RLEdBQUcsR0FBR3JELE9BQU8sQ0FBQyxjQUFjLENBQUM7SUFDbkMsT0FBT3FELEdBQUcsQ0FBQ0MsSUFBSSxDQUNiO01BQUVULE1BQU07TUFBRVUsSUFBSSxFQUFFO0lBQVMsQ0FBQyxFQUMxQnBELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxVQUFVLEVBQ3RCO01BQUVrRCxTQUFTLEVBQUU7SUFBSyxDQUNwQixDQUFDO0VBQ0g7QUFDRixDQUFDO0FBZURsRixJQUFJLENBQUNtRixVQUFVLENBQUMsS0FBSyxDQUFDIiwiaWdub3JlTGlzdCI6W119