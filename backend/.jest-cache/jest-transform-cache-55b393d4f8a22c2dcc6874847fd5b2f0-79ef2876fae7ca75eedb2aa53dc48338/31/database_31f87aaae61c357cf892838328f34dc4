9b380f3be08f315ca51e0ad11b86c577
const {
  Pool
} = require('pg');
const mongoose = require('mongoose');
const {
  Sequelize
} = require('sequelize');
const {
  promisify
} = require('util');

// PostgreSQL configuration
const pgConfig = {
  host: process.env.DB_HOST || process.env.POSTGRES_HOST || 'localhost',
  port: process.env.DB_PORT || process.env.POSTGRES_PORT || 5432,
  database: process.env.DB_NAME || process.env.POSTGRES_DB || 'cex_db',
  user: process.env.DB_USER || process.env.POSTGRES_USER || 'cex_user',
  password: process.env.DB_PASSWORD || process.env.POSTGRES_PASSWORD || 'cex_password_2024',
  max: 20,
  // maximum number of clients in the pool
  idleTimeoutMillis: 30000,
  // how long a client is allowed to remain idle
  connectionTimeoutMillis: 2000,
  // how long to wait when connecting a client
  ssl: process.env.NODE_ENV === 'production' ? {
    rejectUnauthorized: false
  } : false
};

// Create PostgreSQL pool
const pgPool = new Pool(pgConfig);

// Create Sequelize instance
const sequelize = new Sequelize(pgConfig.database, pgConfig.user, pgConfig.password, {
  host: pgConfig.host,
  port: pgConfig.port,
  dialect: 'postgres',
  logging: process.env.NODE_ENV === 'development' ? console.log : false,
  pool: {
    max: 20,
    min: 0,
    acquire: 30000,
    idle: 10000
  },
  ssl: pgConfig.ssl
});

// MongoDB configuration
const mongoConfig = {
  uri: process.env.MONGODB_URI || 'mongodb://localhost:27017/cex_exchange',
  options: {
    maxPoolSize: 10,
    // Maintain up to 10 socket connections
    serverSelectionTimeoutMS: 5000,
    // Keep trying to send operations for 5 seconds
    socketTimeoutMS: 45000,
    // Close sockets after 45 seconds of inactivity
    bufferCommands: false // Disable mongoose buffering
  }
};

// PostgreSQL connection test
pgPool.on('connect', client => {
  console.log('PostgreSQL client connected');
});
pgPool.on('error', (err, client) => {
  console.error('Unexpected error on idle PostgreSQL client', err);
  process.exit(-1);
});

// MongoDB connection
mongoose.connection.on('connected', () => {
  console.log('MongoDB connected successfully');
});
mongoose.connection.on('error', err => {
  console.error('MongoDB connection error:', err);
});
mongoose.connection.on('disconnected', () => {
  console.log('MongoDB disconnected');
});

// Connect to MongoDB
const connectMongoDB = async () => {
  try {
    await mongoose.connect(mongoConfig.uri, mongoConfig.options);
    console.log('MongoDB connection established');
  } catch (error) {
    console.error('MongoDB connection failed:', error);
    process.exit(1);
  }
};

// Database query helpers
const query = async (text, params) => {
  const start = Date.now();
  try {
    const res = await pgPool.query(text, params);
    const duration = Date.now() - start;
    console.log('Executed query', {
      text,
      duration,
      rows: res.rowCount
    });
    return res;
  } catch (error) {
    console.error('Database query error:', error);
    throw error;
  }
};

// Transaction helper
const transaction = async callback => {
  const client = await pgPool.connect();
  try {
    await client.query('BEGIN');
    const result = await callback(client);
    await client.query('COMMIT');
    return result;
  } catch (error) {
    await client.query('ROLLBACK');
    throw error;
  } finally {
    client.release();
  }
};

// Database health check
const healthCheck = async () => {
  const checks = {
    postgresql: false,
    mongodb: false
  };
  try {
    // PostgreSQL health check
    const pgResult = await pgPool.query('SELECT NOW()');
    checks.postgresql = !!pgResult.rows[0];
  } catch (error) {
    console.error('PostgreSQL health check failed:', error);
  }
  try {
    // MongoDB health check
    const mongoResult = await mongoose.connection.db.admin().ping();
    checks.mongodb = mongoResult.ok === 1;
  } catch (error) {
    console.error('MongoDB health check failed:', error);
  }
  return checks;
};

// Graceful shutdown
const closeConnections = async () => {
  try {
    await pgPool.end();
    console.log('PostgreSQL pool closed');
  } catch (error) {
    console.error('Error closing PostgreSQL pool:', error);
  }
  try {
    await mongoose.connection.close();
    console.log('MongoDB connection closed');
  } catch (error) {
    console.error('Error closing MongoDB connection:', error);
  }
};

// Initialize database connections
const initializeDatabase = async () => {
  try {
    // Test PostgreSQL connection
    await pgPool.query('SELECT NOW()');
    console.log('PostgreSQL connection successful');

    // Connect to MongoDB
    await connectMongoDB();
    console.log('All database connections established successfully');
  } catch (error) {
    console.error('Database initialization failed:', error);
    process.exit(1);
  }
};

// Export database utilities
module.exports = {
  pgPool,
  mongoose,
  sequelize,
  query,
  transaction,
  healthCheck,
  closeConnections,
  initializeDatabase
};

// Initialize connections when module is loaded
initializeDatabase();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sIiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiU2VxdWVsaXplIiwicHJvbWlzaWZ5IiwicGdDb25maWciLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJQT1NUR1JFU19IT1NUIiwicG9ydCIsIkRCX1BPUlQiLCJQT1NUR1JFU19QT1JUIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwiUE9TVEdSRVNfREIiLCJ1c2VyIiwiREJfVVNFUiIsIlBPU1RHUkVTX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiUE9TVEdSRVNfUEFTU1dPUkQiLCJtYXgiLCJpZGxlVGltZW91dE1pbGxpcyIsImNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzIiwic3NsIiwiTk9ERV9FTlYiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJwZ1Bvb2wiLCJzZXF1ZWxpemUiLCJkaWFsZWN0IiwibG9nZ2luZyIsImNvbnNvbGUiLCJsb2ciLCJwb29sIiwibWluIiwiYWNxdWlyZSIsImlkbGUiLCJtb25nb0NvbmZpZyIsInVyaSIsIk1PTkdPREJfVVJJIiwib3B0aW9ucyIsIm1heFBvb2xTaXplIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwiYnVmZmVyQ29tbWFuZHMiLCJvbiIsImNsaWVudCIsImVyciIsImVycm9yIiwiZXhpdCIsImNvbm5lY3Rpb24iLCJjb25uZWN0TW9uZ29EQiIsImNvbm5lY3QiLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJyZXMiLCJkdXJhdGlvbiIsInJvd3MiLCJyb3dDb3VudCIsInRyYW5zYWN0aW9uIiwiY2FsbGJhY2siLCJyZXN1bHQiLCJyZWxlYXNlIiwiaGVhbHRoQ2hlY2siLCJjaGVja3MiLCJwb3N0Z3Jlc3FsIiwibW9uZ29kYiIsInBnUmVzdWx0IiwibW9uZ29SZXN1bHQiLCJkYiIsImFkbWluIiwicGluZyIsIm9rIiwiY2xvc2VDb25uZWN0aW9ucyIsImVuZCIsImNsb3NlIiwiaW5pdGlhbGl6ZURhdGFiYXNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgUG9vbCB9ID0gcmVxdWlyZSgncGcnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHsgU2VxdWVsaXplIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcbmNvbnN0IHsgcHJvbWlzaWZ5IH0gPSByZXF1aXJlKCd1dGlsJyk7XG5cbi8vIFBvc3RncmVTUUwgY29uZmlndXJhdGlvblxuY29uc3QgcGdDb25maWcgPSB7XG4gIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgcHJvY2Vzcy5lbnYuUE9TVEdSRVNfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgcG9ydDogcHJvY2Vzcy5lbnYuREJfUE9SVCB8fCBwcm9jZXNzLmVudi5QT1NUR1JFU19QT1JUIHx8IDU0MzIsXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX0RCIHx8ICdjZXhfZGInLFxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX1VTRVIgfHwgJ2NleF91c2VyJyxcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX1BBU1NXT1JEIHx8ICdjZXhfcGFzc3dvcmRfMjAyNCcsXG4gIG1heDogMjAsIC8vIG1heGltdW0gbnVtYmVyIG9mIGNsaWVudHMgaW4gdGhlIHBvb2xcbiAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLCAvLyBob3cgbG9uZyBhIGNsaWVudCBpcyBhbGxvd2VkIHRvIHJlbWFpbiBpZGxlXG4gIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAyMDAwLCAvLyBob3cgbG9uZyB0byB3YWl0IHdoZW4gY29ubmVjdGluZyBhIGNsaWVudFxuICBzc2w6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB7XG4gICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICB9IDogZmFsc2Vcbn07XG5cbi8vIENyZWF0ZSBQb3N0Z3JlU1FMIHBvb2xcbmNvbnN0IHBnUG9vbCA9IG5ldyBQb29sKHBnQ29uZmlnKTtcblxuLy8gQ3JlYXRlIFNlcXVlbGl6ZSBpbnN0YW5jZVxuY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShcbiAgcGdDb25maWcuZGF0YWJhc2UsXG4gIHBnQ29uZmlnLnVzZXIsXG4gIHBnQ29uZmlnLnBhc3N3b3JkLFxuICB7XG4gICAgaG9zdDogcGdDb25maWcuaG9zdCxcbiAgICBwb3J0OiBwZ0NvbmZpZy5wb3J0LFxuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgbG9nZ2luZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBjb25zb2xlLmxvZyA6IGZhbHNlLFxuICAgIHBvb2w6IHtcbiAgICAgIG1heDogMjAsXG4gICAgICBtaW46IDAsXG4gICAgICBhY3F1aXJlOiAzMDAwMCxcbiAgICAgIGlkbGU6IDEwMDAwXG4gICAgfSxcbiAgICBzc2w6IHBnQ29uZmlnLnNzbFxuICB9XG4pO1xuXG4vLyBNb25nb0RCIGNvbmZpZ3VyYXRpb25cbmNvbnN0IG1vbmdvQ29uZmlnID0ge1xuICB1cmk6IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2NleF9leGNoYW5nZScsXG4gIG9wdGlvbnM6IHtcbiAgICBtYXhQb29sU2l6ZTogMTAsIC8vIE1haW50YWluIHVwIHRvIDEwIHNvY2tldCBjb25uZWN0aW9uc1xuICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCwgLy8gS2VlcCB0cnlpbmcgdG8gc2VuZCBvcGVyYXRpb25zIGZvciA1IHNlY29uZHNcbiAgICBzb2NrZXRUaW1lb3V0TVM6IDQ1MDAwLCAvLyBDbG9zZSBzb2NrZXRzIGFmdGVyIDQ1IHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSwgLy8gRGlzYWJsZSBtb25nb29zZSBidWZmZXJpbmdcbiAgfVxufTtcblxuLy8gUG9zdGdyZVNRTCBjb25uZWN0aW9uIHRlc3RcbnBnUG9vbC5vbignY29ubmVjdCcsIChjbGllbnQpID0+IHtcbiAgY29uc29sZS5sb2coJ1Bvc3RncmVTUUwgY2xpZW50IGNvbm5lY3RlZCcpO1xufSk7XG5cbnBnUG9vbC5vbignZXJyb3InLCAoZXJyLCBjbGllbnQpID0+IHtcbiAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBlcnJvciBvbiBpZGxlIFBvc3RncmVTUUwgY2xpZW50JywgZXJyKTtcbiAgcHJvY2Vzcy5leGl0KC0xKTtcbn0pO1xuXG4vLyBNb25nb0RCIGNvbm5lY3Rpb25cbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Nvbm5lY3RlZCcsICgpID0+IHtcbiAgY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGVkIHN1Y2Nlc3NmdWxseScpO1xufSk7XG5cbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICBjb25zb2xlLmVycm9yKCdNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyKTtcbn0pO1xuXG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdNb25nb0RCIGRpc2Nvbm5lY3RlZCcpO1xufSk7XG5cbi8vIENvbm5lY3QgdG8gTW9uZ29EQlxuY29uc3QgY29ubmVjdE1vbmdvREIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChtb25nb0NvbmZpZy51cmksIG1vbmdvQ29uZmlnLm9wdGlvbnMpO1xuICAgIGNvbnNvbGUubG9nKCdNb25nb0RCIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdNb25nb0RCIGNvbm5lY3Rpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn07XG5cbi8vIERhdGFiYXNlIHF1ZXJ5IGhlbHBlcnNcbmNvbnN0IHF1ZXJ5ID0gYXN5bmMgKHRleHQsIHBhcmFtcykgPT4ge1xuICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgcGdQb29sLnF1ZXJ5KHRleHQsIHBhcmFtcyk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgY29uc29sZS5sb2coJ0V4ZWN1dGVkIHF1ZXJ5JywgeyB0ZXh0LCBkdXJhdGlvbiwgcm93czogcmVzLnJvd0NvdW50IH0pO1xuICAgIHJldHVybiByZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgcXVlcnkgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG4vLyBUcmFuc2FjdGlvbiBoZWxwZXJcbmNvbnN0IHRyYW5zYWN0aW9uID0gYXN5bmMgKGNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBnUG9vbC5jb25uZWN0KCk7XG4gIHRyeSB7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdCRUdJTicpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxiYWNrKGNsaWVudCk7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdDT01NSVQnKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnUk9MTEJBQ0snKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICB9XG59O1xuXG4vLyBEYXRhYmFzZSBoZWFsdGggY2hlY2tcbmNvbnN0IGhlYWx0aENoZWNrID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjaGVja3MgPSB7XG4gICAgcG9zdGdyZXNxbDogZmFsc2UsXG4gICAgbW9uZ29kYjogZmFsc2VcbiAgfTtcblxuICB0cnkge1xuICAgIC8vIFBvc3RncmVTUUwgaGVhbHRoIGNoZWNrXG4gICAgY29uc3QgcGdSZXN1bHQgPSBhd2FpdCBwZ1Bvb2wucXVlcnkoJ1NFTEVDVCBOT1coKScpO1xuICAgIGNoZWNrcy5wb3N0Z3Jlc3FsID0gISFwZ1Jlc3VsdC5yb3dzWzBdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Bvc3RncmVTUUwgaGVhbHRoIGNoZWNrIGZhaWxlZDonLCBlcnJvcik7XG4gIH1cblxuICB0cnkge1xuICAgIC8vIE1vbmdvREIgaGVhbHRoIGNoZWNrXG4gICAgY29uc3QgbW9uZ29SZXN1bHQgPSBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmRiLmFkbWluKCkucGluZygpO1xuICAgIGNoZWNrcy5tb25nb2RiID0gbW9uZ29SZXN1bHQub2sgPT09IDE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignTW9uZ29EQiBoZWFsdGggY2hlY2sgZmFpbGVkOicsIGVycm9yKTtcbiAgfVxuXG4gIHJldHVybiBjaGVja3M7XG59O1xuXG4vLyBHcmFjZWZ1bCBzaHV0ZG93blxuY29uc3QgY2xvc2VDb25uZWN0aW9ucyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBwZ1Bvb2wuZW5kKCk7XG4gICAgY29uc29sZS5sb2coJ1Bvc3RncmVTUUwgcG9vbCBjbG9zZWQnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbG9zaW5nIFBvc3RncmVTUUwgcG9vbDonLCBlcnJvcik7XG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0aW9uIGNsb3NlZCcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsb3NpbmcgTW9uZ29EQiBjb25uZWN0aW9uOicsIGVycm9yKTtcbiAgfVxufTtcblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBjb25uZWN0aW9uc1xuY29uc3QgaW5pdGlhbGl6ZURhdGFiYXNlID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIFRlc3QgUG9zdGdyZVNRTCBjb25uZWN0aW9uXG4gICAgYXdhaXQgcGdQb29sLnF1ZXJ5KCdTRUxFQ1QgTk9XKCknKTtcbiAgICBjb25zb2xlLmxvZygnUG9zdGdyZVNRTCBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwnKTtcblxuICAgIC8vIENvbm5lY3QgdG8gTW9uZ29EQlxuICAgIGF3YWl0IGNvbm5lY3RNb25nb0RCKCk7XG5cbiAgICBjb25zb2xlLmxvZygnQWxsIGRhdGFiYXNlIGNvbm5lY3Rpb25zIGVzdGFibGlzaGVkIHN1Y2Nlc3NmdWxseScpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGluaXRpYWxpemF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59O1xuXG4vLyBFeHBvcnQgZGF0YWJhc2UgdXRpbGl0aWVzXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcGdQb29sLFxuICBtb25nb29zZSxcbiAgc2VxdWVsaXplLFxuICBxdWVyeSxcbiAgdHJhbnNhY3Rpb24sXG4gIGhlYWx0aENoZWNrLFxuICBjbG9zZUNvbm5lY3Rpb25zLFxuICBpbml0aWFsaXplRGF0YWJhc2Vcbn07XG5cbi8vIEluaXRpYWxpemUgY29ubmVjdGlvbnMgd2hlbiBtb2R1bGUgaXMgbG9hZGVkXG5pbml0aWFsaXplRGF0YWJhc2UoKTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBSyxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDOUIsTUFBTUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLE1BQU07RUFBRUU7QUFBVSxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDMUMsTUFBTTtFQUFFRztBQUFVLENBQUMsR0FBR0gsT0FBTyxDQUFDLE1BQU0sQ0FBQzs7QUFFckM7QUFDQSxNQUFNSSxRQUFRLEdBQUc7RUFDZkMsSUFBSSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsT0FBTyxJQUFJRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0UsYUFBYSxJQUFJLFdBQVc7RUFDckVDLElBQUksRUFBRUosT0FBTyxDQUFDQyxHQUFHLENBQUNJLE9BQU8sSUFBSUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLGFBQWEsSUFBSSxJQUFJO0VBQzlEQyxRQUFRLEVBQUVQLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTyxPQUFPLElBQUlSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUSxXQUFXLElBQUksUUFBUTtFQUNwRUMsSUFBSSxFQUFFVixPQUFPLENBQUNDLEdBQUcsQ0FBQ1UsT0FBTyxJQUFJWCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1csYUFBYSxJQUFJLFVBQVU7RUFDcEVDLFFBQVEsRUFBRWIsT0FBTyxDQUFDQyxHQUFHLENBQUNhLFdBQVcsSUFBSWQsT0FBTyxDQUFDQyxHQUFHLENBQUNjLGlCQUFpQixJQUFJLG1CQUFtQjtFQUN6RkMsR0FBRyxFQUFFLEVBQUU7RUFBRTtFQUNUQyxpQkFBaUIsRUFBRSxLQUFLO0VBQUU7RUFDMUJDLHVCQUF1QixFQUFFLElBQUk7RUFBRTtFQUMvQkMsR0FBRyxFQUFFbkIsT0FBTyxDQUFDQyxHQUFHLENBQUNtQixRQUFRLEtBQUssWUFBWSxHQUFHO0lBQzNDQyxrQkFBa0IsRUFBRTtFQUN0QixDQUFDLEdBQUc7QUFDTixDQUFDOztBQUVEO0FBQ0EsTUFBTUMsTUFBTSxHQUFHLElBQUk3QixJQUFJLENBQUNLLFFBQVEsQ0FBQzs7QUFFakM7QUFDQSxNQUFNeUIsU0FBUyxHQUFHLElBQUkzQixTQUFTLENBQzdCRSxRQUFRLENBQUNTLFFBQVEsRUFDakJULFFBQVEsQ0FBQ1ksSUFBSSxFQUNiWixRQUFRLENBQUNlLFFBQVEsRUFDakI7RUFDRWQsSUFBSSxFQUFFRCxRQUFRLENBQUNDLElBQUk7RUFDbkJLLElBQUksRUFBRU4sUUFBUSxDQUFDTSxJQUFJO0VBQ25Cb0IsT0FBTyxFQUFFLFVBQVU7RUFDbkJDLE9BQU8sRUFBRXpCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDbUIsUUFBUSxLQUFLLGFBQWEsR0FBR00sT0FBTyxDQUFDQyxHQUFHLEdBQUcsS0FBSztFQUNyRUMsSUFBSSxFQUFFO0lBQ0paLEdBQUcsRUFBRSxFQUFFO0lBQ1BhLEdBQUcsRUFBRSxDQUFDO0lBQ05DLE9BQU8sRUFBRSxLQUFLO0lBQ2RDLElBQUksRUFBRTtFQUNSLENBQUM7RUFDRFosR0FBRyxFQUFFckIsUUFBUSxDQUFDcUI7QUFDaEIsQ0FDRixDQUFDOztBQUVEO0FBQ0EsTUFBTWEsV0FBVyxHQUFHO0VBQ2xCQyxHQUFHLEVBQUVqQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ2lDLFdBQVcsSUFBSSx3Q0FBd0M7RUFDeEVDLE9BQU8sRUFBRTtJQUNQQyxXQUFXLEVBQUUsRUFBRTtJQUFFO0lBQ2pCQyx3QkFBd0IsRUFBRSxJQUFJO0lBQUU7SUFDaENDLGVBQWUsRUFBRSxLQUFLO0lBQUU7SUFDeEJDLGNBQWMsRUFBRSxLQUFLLENBQUU7RUFDekI7QUFDRixDQUFDOztBQUVEO0FBQ0FqQixNQUFNLENBQUNrQixFQUFFLENBQUMsU0FBUyxFQUFHQyxNQUFNLElBQUs7RUFDL0JmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZCQUE2QixDQUFDO0FBQzVDLENBQUMsQ0FBQztBQUVGTCxNQUFNLENBQUNrQixFQUFFLENBQUMsT0FBTyxFQUFFLENBQUNFLEdBQUcsRUFBRUQsTUFBTSxLQUFLO0VBQ2xDZixPQUFPLENBQUNpQixLQUFLLENBQUMsNENBQTRDLEVBQUVELEdBQUcsQ0FBQztFQUNoRTFDLE9BQU8sQ0FBQzRDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQixDQUFDLENBQUM7O0FBRUY7QUFDQWpELFFBQVEsQ0FBQ2tELFVBQVUsQ0FBQ0wsRUFBRSxDQUFDLFdBQVcsRUFBRSxNQUFNO0VBQ3hDZCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQztBQUMvQyxDQUFDLENBQUM7QUFFRmhDLFFBQVEsQ0FBQ2tELFVBQVUsQ0FBQ0wsRUFBRSxDQUFDLE9BQU8sRUFBR0UsR0FBRyxJQUFLO0VBQ3ZDaEIsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLDJCQUEyQixFQUFFRCxHQUFHLENBQUM7QUFDakQsQ0FBQyxDQUFDO0FBRUYvQyxRQUFRLENBQUNrRCxVQUFVLENBQUNMLEVBQUUsQ0FBQyxjQUFjLEVBQUUsTUFBTTtFQUMzQ2QsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0JBQXNCLENBQUM7QUFDckMsQ0FBQyxDQUFDOztBQUVGO0FBQ0EsTUFBTW1CLGNBQWMsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDakMsSUFBSTtJQUNGLE1BQU1uRCxRQUFRLENBQUNvRCxPQUFPLENBQUNmLFdBQVcsQ0FBQ0MsR0FBRyxFQUFFRCxXQUFXLENBQUNHLE9BQU8sQ0FBQztJQUM1RFQsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0NBQWdDLENBQUM7RUFDL0MsQ0FBQyxDQUFDLE9BQU9nQixLQUFLLEVBQUU7SUFDZGpCLE9BQU8sQ0FBQ2lCLEtBQUssQ0FBQyw0QkFBNEIsRUFBRUEsS0FBSyxDQUFDO0lBQ2xEM0MsT0FBTyxDQUFDNEMsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNqQjtBQUNGLENBQUM7O0FBRUQ7QUFDQSxNQUFNSSxLQUFLLEdBQUcsTUFBQUEsQ0FBT0MsSUFBSSxFQUFFQyxNQUFNLEtBQUs7RUFDcEMsTUFBTUMsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0VBQ3hCLElBQUk7SUFDRixNQUFNQyxHQUFHLEdBQUcsTUFBTWhDLE1BQU0sQ0FBQzBCLEtBQUssQ0FBQ0MsSUFBSSxFQUFFQyxNQUFNLENBQUM7SUFDNUMsTUFBTUssUUFBUSxHQUFHSCxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLEtBQUs7SUFDbkN6QixPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRTtNQUFFc0IsSUFBSTtNQUFFTSxRQUFRO01BQUVDLElBQUksRUFBRUYsR0FBRyxDQUFDRztJQUFTLENBQUMsQ0FBQztJQUNyRSxPQUFPSCxHQUFHO0VBQ1osQ0FBQyxDQUFDLE9BQU9YLEtBQUssRUFBRTtJQUNkakIsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLHVCQUF1QixFQUFFQSxLQUFLLENBQUM7SUFDN0MsTUFBTUEsS0FBSztFQUNiO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBLE1BQU1lLFdBQVcsR0FBRyxNQUFPQyxRQUFRLElBQUs7RUFDdEMsTUFBTWxCLE1BQU0sR0FBRyxNQUFNbkIsTUFBTSxDQUFDeUIsT0FBTyxDQUFDLENBQUM7RUFDckMsSUFBSTtJQUNGLE1BQU1OLE1BQU0sQ0FBQ08sS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUMzQixNQUFNWSxNQUFNLEdBQUcsTUFBTUQsUUFBUSxDQUFDbEIsTUFBTSxDQUFDO0lBQ3JDLE1BQU1BLE1BQU0sQ0FBQ08sS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUM1QixPQUFPWSxNQUFNO0VBQ2YsQ0FBQyxDQUFDLE9BQU9qQixLQUFLLEVBQUU7SUFDZCxNQUFNRixNQUFNLENBQUNPLEtBQUssQ0FBQyxVQUFVLENBQUM7SUFDOUIsTUFBTUwsS0FBSztFQUNiLENBQUMsU0FBUztJQUNSRixNQUFNLENBQUNvQixPQUFPLENBQUMsQ0FBQztFQUNsQjtBQUNGLENBQUM7O0FBRUQ7QUFDQSxNQUFNQyxXQUFXLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQzlCLE1BQU1DLE1BQU0sR0FBRztJQUNiQyxVQUFVLEVBQUUsS0FBSztJQUNqQkMsT0FBTyxFQUFFO0VBQ1gsQ0FBQztFQUVELElBQUk7SUFDRjtJQUNBLE1BQU1DLFFBQVEsR0FBRyxNQUFNNUMsTUFBTSxDQUFDMEIsS0FBSyxDQUFDLGNBQWMsQ0FBQztJQUNuRGUsTUFBTSxDQUFDQyxVQUFVLEdBQUcsQ0FBQyxDQUFDRSxRQUFRLENBQUNWLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDeEMsQ0FBQyxDQUFDLE9BQU9iLEtBQUssRUFBRTtJQUNkakIsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLGlDQUFpQyxFQUFFQSxLQUFLLENBQUM7RUFDekQ7RUFFQSxJQUFJO0lBQ0Y7SUFDQSxNQUFNd0IsV0FBVyxHQUFHLE1BQU14RSxRQUFRLENBQUNrRCxVQUFVLENBQUN1QixFQUFFLENBQUNDLEtBQUssQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDO0lBQy9EUCxNQUFNLENBQUNFLE9BQU8sR0FBR0UsV0FBVyxDQUFDSSxFQUFFLEtBQUssQ0FBQztFQUN2QyxDQUFDLENBQUMsT0FBTzVCLEtBQUssRUFBRTtJQUNkakIsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLDhCQUE4QixFQUFFQSxLQUFLLENBQUM7RUFDdEQ7RUFFQSxPQUFPb0IsTUFBTTtBQUNmLENBQUM7O0FBRUQ7QUFDQSxNQUFNUyxnQkFBZ0IsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDbkMsSUFBSTtJQUNGLE1BQU1sRCxNQUFNLENBQUNtRCxHQUFHLENBQUMsQ0FBQztJQUNsQi9DLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHdCQUF3QixDQUFDO0VBQ3ZDLENBQUMsQ0FBQyxPQUFPZ0IsS0FBSyxFQUFFO0lBQ2RqQixPQUFPLENBQUNpQixLQUFLLENBQUMsZ0NBQWdDLEVBQUVBLEtBQUssQ0FBQztFQUN4RDtFQUVBLElBQUk7SUFDRixNQUFNaEQsUUFBUSxDQUFDa0QsVUFBVSxDQUFDNkIsS0FBSyxDQUFDLENBQUM7SUFDakNoRCxPQUFPLENBQUNDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQztFQUMxQyxDQUFDLENBQUMsT0FBT2dCLEtBQUssRUFBRTtJQUNkakIsT0FBTyxDQUFDaUIsS0FBSyxDQUFDLG1DQUFtQyxFQUFFQSxLQUFLLENBQUM7RUFDM0Q7QUFDRixDQUFDOztBQUVEO0FBQ0EsTUFBTWdDLGtCQUFrQixHQUFHLE1BQUFBLENBQUEsS0FBWTtFQUNyQyxJQUFJO0lBQ0Y7SUFDQSxNQUFNckQsTUFBTSxDQUFDMEIsS0FBSyxDQUFDLGNBQWMsQ0FBQztJQUNsQ3RCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxDQUFDOztJQUUvQztJQUNBLE1BQU1tQixjQUFjLENBQUMsQ0FBQztJQUV0QnBCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1EQUFtRCxDQUFDO0VBQ2xFLENBQUMsQ0FBQyxPQUFPZ0IsS0FBSyxFQUFFO0lBQ2RqQixPQUFPLENBQUNpQixLQUFLLENBQUMsaUNBQWlDLEVBQUVBLEtBQUssQ0FBQztJQUN2RDNDLE9BQU8sQ0FBQzRDLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDakI7QUFDRixDQUFDOztBQUVEO0FBQ0FnQyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNmdkQsTUFBTTtFQUNOM0IsUUFBUTtFQUNSNEIsU0FBUztFQUNUeUIsS0FBSztFQUNMVSxXQUFXO0VBQ1hJLFdBQVc7RUFDWFUsZ0JBQWdCO0VBQ2hCRztBQUNGLENBQUM7O0FBRUQ7QUFDQUEsa0JBQWtCLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==